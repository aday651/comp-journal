<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>ACS and satellite data on Atlanta and the wider metropoliton area</title>

<script src="acs_files/header-attrs-2.11/header-attrs.js"></script>
<script src="acs_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="acs_files/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="acs_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="acs_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="acs_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="acs_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="acs_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="acs_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="acs_files/navigation-1.1/tabsets.js"></script>
<script src="acs_files/navigation-1.1/codefolding.js"></script>
<link href="acs_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="acs_files/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">ACS and satellite data on Atlanta and the wider metropoliton area</h1>

</div>


<div id="geographic-units-and-time-periods-considered" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Geographic units and time period(s) considered</h1>
<p>Throughout, we will consider different geographic units, corresponding to various collections of counties, and other unified geographical areas corresponding to different parts of the landscape.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>core_counties <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Fulton&quot;</span>, <span class="st">&quot;DeKalb&quot;</span>, <span class="st">&quot;Gwinnett&quot;</span>, <span class="st">&quot;Cobb&quot;</span>, <span class="st">&quot;Clayton&quot;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>arc_counties <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Fulton&quot;</span>, <span class="st">&quot;DeKalb&quot;</span>, <span class="st">&quot;Gwinnett&quot;</span>, <span class="st">&quot;Cobb&quot;</span>, <span class="st">&quot;Clayton&quot;</span>, <span class="st">&quot;Forsyth&quot;</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Cherokee&quot;</span>, <span class="st">&quot;Douglas&quot;</span>, <span class="st">&quot;Fayette&quot;</span>, <span class="st">&quot;Henry&quot;</span>, <span class="st">&quot;Rockdale&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>atlanta_msa_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Fulton&#39;</span>, <span class="st">&#39;Gwinnett&#39;</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Cobb&#39;</span>, <span class="st">&#39;DeKalb&#39;</span>, <span class="st">&#39;Clayton&#39;</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Cherokee&#39;</span>, <span class="st">&#39;Forsyth&#39;</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Henry&#39;</span>, <span class="st">&#39;Paulding&#39;</span>, <span class="st">&#39;Coweta&#39;</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Douglas&#39;</span>, <span class="st">&#39;Fayette&#39;</span>, <span class="st">&#39;Carroll&#39;</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Newton&#39;</span>, <span class="st">&#39;Bartow&#39;</span>, <span class="st">&#39;Walton&#39;</span>, </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Rockdale&#39;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>atlanta_msa_2 <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Barrow&#39;</span>, <span class="st">&#39;Spalding&#39;</span>, <span class="st">&#39;Pickens&#39;</span>, </span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Haralson&#39;</span>, <span class="st">&#39;Dawson&#39;</span>, <span class="st">&#39;Butts&#39;</span>, </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Meriwether&#39;</span>, <span class="st">&#39;Morgan&#39;</span>,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Pike&#39;</span>, <span class="st">&#39;Lamar&#39;</span>, <span class="st">&#39;Jasper&#39;</span>, <span class="st">&#39;Heard&#39;</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>atlanta_msa <span class="ot">&lt;-</span> <span class="fu">c</span>(atlanta_msa_1, atlanta_msa_2)</span></code></pre></div>
<p>Throughout, we will frequently use ACS data; for ACS 1 year estimates, we use data from 2009 to 2019 (we note that <a href="https://www.census.gov/newsroom/press-releases/2021/changes-2020-acs-1-year.html">2020 data has not been released</a> as a result of the COVID pandemic adversely affecting data collection), and for ACS 5 year estimates, we use data in the range from the 2006-to-2010 estimates to the 2016-to-2020.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>years_acs1 <span class="ot">&lt;-</span> <span class="fu">lst</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2009</span>, <span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>years_acs5 <span class="ot">&lt;-</span> <span class="fu">lst</span>(</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>, </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="defining-inside-and-outside-the-perimeter" class="section level2" number="1.1">
<h2 number="1.1"><span class="header-section-number">1.1</span> Defining inside and outside the perimeter</h2>
<p>Here, we will consider the I-285 ringroad as defining the “perimeter” of the “main” part of Atlanta, and will consider anything inside of this as being “inside the perimeter” (or ITP), and anything outside as “outside the perimeter” (or OTP). The shape file for the ringroad is available <a href="https://opendata.atlantaregional.com/datasets/929e158242f24c9fb260606526b7d80e">online</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>highways <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="st">&quot;../data/georgia-highways.geojson&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `Expressways_Georgia&#39; from data source `/mnt/c/Users/adavi/Documents/comp-journal/ajc-satellite/data/georgia-highways.geojson&#39; using driver `GeoJSON&#39;
## Simple feature collection with 44 features and 10 fields
## Geometry type: MULTILINESTRING
## Dimension:     XY
## Bounding box:  xmin: -85.55382 ymin: 30.62627 xmax: -81.09842 ymax: 34.98588
## Geodetic CRS:  WGS 84</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>it_285 <span class="ot">&lt;-</span> highways <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">str_detect</span>(ROAD_NAME, <span class="st">&quot;285&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(ROAD_NAME, geometry)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>it_285 <span class="ot">&lt;-</span> it_285[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), ]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>itp <span class="ot">&lt;-</span> <span class="fu">st_union</span>(<span class="fu">st_convex_hull</span>(it_285))</span></code></pre></div>
<p>As is visible from the plot below, the ringroad does not necessarily line up nicely with the county divisions within Georgia: the perimeter is highlighted in red, with the regular counties highlighted in black. However, the census tracts (in grey) do line up more nicely with the perimeter, albeit not exactly.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>arc_counties_shp <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="st">&quot;../ga-counties/Counties_Georgia.shp&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(NAME10 <span class="sc">%in%</span> arc_counties) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(NAME10, COUNTYFP10, geometry)</span></code></pre></div>
<pre><code>## Reading layer `Counties_Georgia&#39; from data source `/mnt/c/Users/adavi/Documents/comp-journal/ajc-satellite/ga-counties/Counties_Georgia.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 159 features and 20 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -85.60517 ymin: 30.35576 xmax: -80.75143 ymax: 35.00067
## Geodetic CRS:  WGS 84</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>arc_tracts_shp <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="st">&quot;../ga-tracts-2019/tl_2019_13_tract.shp&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(COUNTYFP <span class="sc">%in%</span> arc_counties_shp<span class="sc">$</span>COUNTYFP10)</span></code></pre></div>
<pre><code>## Reading layer `tl_2019_13_tract&#39; from data source `/mnt/c/Users/adavi/Documents/comp-journal/ajc-satellite/ga-tracts-2019/tl_2019_13_tract.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 1969 features and 12 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -85.60516 ymin: 30.35576 xmax: -80.78296 ymax: 35.0013
## Geodetic CRS:  NAD83</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>highway_arc <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(highways, arc_counties_shp)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>atlanta_msa_shp <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="st">&quot;../ga-counties/Counties_Georgia.shp&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(NAME10 <span class="sc">%in%</span> atlanta_msa) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(NAME10, COUNTYFP10, geometry)</span></code></pre></div>
<pre><code>## Reading layer `Counties_Georgia&#39; from data source `/mnt/c/Users/adavi/Documents/comp-journal/ajc-satellite/ga-counties/Counties_Georgia.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 159 features and 20 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -85.60517 ymin: 30.35576 xmax: -80.75143 ymax: 35.00067
## Geodetic CRS:  WGS 84</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sf_use_s2</span>(<span class="cn">FALSE</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>highway_arc_msa <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    highways, sf<span class="sc">::</span><span class="fu">st_buffer</span>(atlanta_msa_shp, <span class="at">dist =</span> <span class="dv">0</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_tracts_shp, <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> itp, <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-5-1.png" width="960" /></p>
<p>Ultimately, we want to try and assign each census tract to being ITP or OTP. Firstly, to handle this, we count the number of tracts (where we use the 2020 Census Tracts) which intersect with the “perimeter” itself.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>ics <span class="ot">&lt;-</span> <span class="fu">st_intersects</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_transform</span>(<span class="fu">st_boundary</span>(itp), <span class="at">crs =</span> <span class="dv">4269</span>),</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    arc_tracts_shp</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Number of census tracts intersecting the interstate:&quot;</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">length</span>(ics[[<span class="dv">1</span>]])</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>## [1] &quot;Number of census tracts intersecting the interstate: 57&quot;</code></pre>
<p>As we can see, a small but non-zero number fall inside of this category; we will count these tracts as being inside of the perimeter.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>arc_tracts_shp <span class="ot">&lt;-</span> arc_tracts_shp <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(NAME, COUNTYFP, TRACTCE, geometry) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">tp =</span> <span class="fu">st_intersects</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">st_transform</span>(<span class="fu">st_boundary</span>(itp), <span class="at">crs =</span> <span class="dv">4269</span>),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>            geometry, <span class="at">sparse =</span> <span class="cn">FALSE</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        )[<span class="dv">1</span>, ],</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">itp =</span> <span class="fu">st_within</span>(</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>            geometry,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">st_transform</span>(itp, <span class="at">crs =</span> <span class="dv">4269</span>), <span class="at">sparse =</span> <span class="cn">FALSE</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>        )[, <span class="dv">1</span>],</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">itp =</span> tp <span class="sc">|</span> itp,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">otp =</span> <span class="sc">!</span>itp</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>tp)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>arc_tracts_shp <span class="sc">%&gt;%</span> </span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">itp =</span> <span class="fu">sum</span>(itp), <span class="at">otp =</span> <span class="fu">sum</span>(otp)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["itp"],"name":[1],"type":["int"],"align":["right"]},{"label":["otp"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"254","2":"529"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>arc_tracts_shp2 <span class="ot">&lt;-</span> arc_tracts_shp <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">cols =</span> <span class="fu">c</span>(itp, otp),</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_to =</span> <span class="st">&quot;class&quot;</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_to =</span> <span class="st">&quot;in_class&quot;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(in_class <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>in_class)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> arc_tracts_shp2, <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> class)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> itp, <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">84.6</span>, <span class="sc">-</span><span class="dv">84</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">33.4</span>, <span class="dv">34</span>), <span class="at">expand =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-8-1.png" width="960" /></p>
</div>
</div>
<div id="household-income-distribution-in-the-atlanta-metro-area-between-2009-and-2019" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Household income distribution in the Atlanta metro area between 2009 and 2019</h1>
<p>ACS 1-year data from 2009 to 2019, showing the number of households (with error estimates) which lie in particular income bands across the ARC counties.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df_income_distribution</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["year"],"name":[1],"type":["chr"],"align":["left"]},{"label":["GEOID"],"name":[2],"type":["chr"],"align":["left"]},{"label":["county"],"name":[3],"type":["chr"],"align":["left"]},{"label":["variable"],"name":[4],"type":["fct"],"align":["left"]},{"label":["estimate"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["moe"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"2009","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"27116","6":"2694.9065"},{"1":"2009","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"11109","6":"1588.4949"},{"1":"2009","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"5141","6":"1135.0000"},{"1":"2009","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"2988","6":"898.0000"},{"1":"2009","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"14910","6":"2070.5741"},{"1":"2009","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"12710","6":"1750.0000"},{"1":"2009","2":"13057","3":"Cherokee County","4":"Total","5":"73974","6":"1856.0000"},{"1":"2009","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"49856","6":"3980.2840"},{"1":"2009","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"4874","6":"1056.9863"},{"1":"2009","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"1382","6":"641.0000"},{"1":"2009","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"563","6":"346.0000"},{"1":"2009","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"20454","6":"2417.2118"},{"1":"2009","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"8627","6":"1393.0000"},{"1":"2009","2":"13063","3":"Clayton County","4":"Total","5":"85756","6":"2460.0000"},{"1":"2009","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"98994","6":"5162.6859"},{"1":"2009","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"38375","6":"2783.1913"},{"1":"2009","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"18113","6":"1821.0000"},{"1":"2009","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"16246","6":"1787.0000"},{"1":"2009","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"44617","6":"3292.2735"},{"1":"2009","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"34552","6":"3083.0000"},{"1":"2009","2":"13067","3":"Cobb County","4":"Total","5":"250897","6":"3126.0000"},{"1":"2009","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"135903","6":"6290.0475"},{"1":"2009","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"30693","6":"2705.6182"},{"1":"2009","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"11801","6":"1630.0000"},{"1":"2009","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"12754","6":"1602.0000"},{"1":"2009","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"51129","6":"3619.9541"},{"1":"2009","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"30298","6":"2803.0000"},{"1":"2009","2":"13089","3":"DeKalb County","4":"Total","5":"272578","6":"5098.0000"},{"1":"2009","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"21796","6":"2762.1383"},{"1":"2009","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"6029","6":"1195.0703"},{"1":"2009","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"1543","6":"559.0000"},{"1":"2009","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"1214","6":"617.0000"},{"1":"2009","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"7449","6":"1325.6489"},{"1":"2009","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"5052","6":"1080.0000"},{"1":"2009","2":"13097","3":"Douglas County","4":"Total","5":"43083","6":"1635.0000"},{"1":"2009","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"10942","6":"1537.2918"},{"1":"2009","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"6140","6":"993.3121"},{"1":"2009","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"3186","6":"784.0000"},{"1":"2009","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"2811","6":"693.0000"},{"1":"2009","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"6864","6":"1077.8001"},{"1":"2009","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"6949","6":"1258.0000"},{"1":"2009","2":"13113","3":"Fayette County","4":"Total","5":"36892","6":"888.0000"},{"1":"2009","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"17133","6":"2325.3426"},{"1":"2009","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"13289","6":"1399.4856"},{"1":"2009","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"5443","6":"1091.0000"},{"1":"2009","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"4610","6":"796.0000"},{"1":"2009","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"9104","6":"1513.2112"},{"1":"2009","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"9565","6":"1574.0000"},{"1":"2009","2":"13117","3":"Forsyth County","4":"Total","5":"59144","6":"1411.0000"},{"1":"2009","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"165869","6":"7147.3443"},{"1":"2009","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"48217","6":"3720.8647"},{"1":"2009","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"21732","6":"1919.0000"},{"1":"2009","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"35791","6":"2603.0000"},{"1":"2009","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"59115","6":"4400.7646"},{"1":"2009","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"36997","6":"3513.0000"},{"1":"2009","2":"13121","3":"Fulton County","4":"Total","5":"367721","6":"5469.0000"},{"1":"2009","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"107542","6":"5514.4991"},{"1":"2009","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"34880","6":"2444.4930"},{"1":"2009","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"12798","6":"1579.0000"},{"1":"2009","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"10676","6":"1706.0000"},{"1":"2009","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"53123","6":"3490.3034"},{"1":"2009","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"37742","6":"3002.0000"},{"1":"2009","2":"13135","3":"Gwinnett County","4":"Total","5":"256761","6":"3412.0000"},{"1":"2009","2":"13151","3":"Henry County","4":"Less than $50,000","5":"23579","6":"2564.4927"},{"1":"2009","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"9963","6":"1663.9498"},{"1":"2009","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"2714","6":"661.0000"},{"1":"2009","2":"13151","3":"Henry County","4":"$200,000 or more","5":"1195","6":"390.0000"},{"1":"2009","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"15284","6":"1856.6952"},{"1":"2009","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"11701","6":"1508.0000"},{"1":"2009","2":"13151","3":"Henry County","4":"Total","5":"64436","6":"1777.0000"},{"1":"2009","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"14738","6":"1978.3061"},{"1":"2009","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"3529","6":"828.3290"},{"1":"2009","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"1221","6":"408.0000"},{"1":"2009","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"328","6":"285.0000"},{"1":"2009","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"5432","6":"1077.4809"},{"1":"2009","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"3872","6":"903.0000"},{"1":"2009","2":"13247","3":"Rockdale County","4":"Total","5":"29120","6":"948.0000"},{"1":"2010","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"29490","6":"2795.7688"},{"1":"2010","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"10819","6":"1485.9428"},{"1":"2010","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"6635","6":"1076.0000"},{"1":"2010","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"3197","6":"887.0000"},{"1":"2010","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"15722","6":"2147.2291"},{"1":"2010","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"10650","6":"1669.0000"},{"1":"2010","2":"13057","3":"Cherokee County","4":"Total","5":"76513","6":"1518.0000"},{"1":"2010","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"55382","6":"4045.1053"},{"1":"2010","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"6155","6":"1266.1698"},{"1":"2010","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"646","6":"350.0000"},{"1":"2010","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"610","6":"378.0000"},{"1":"2010","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"14845","6":"1750.1134"},{"1":"2010","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"6745","6":"1189.0000"},{"1":"2010","2":"13063","3":"Clayton County","4":"Total","5":"84383","6":"2309.0000"},{"1":"2010","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"106969","6":"5906.4834"},{"1":"2010","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"40609","6":"2986.4983"},{"1":"2010","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"16368","6":"1809.0000"},{"1":"2010","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"15007","6":"1895.0000"},{"1":"2010","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"45021","6":"3486.3465"},{"1":"2010","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"32201","6":"2812.0000"},{"1":"2010","2":"13067","3":"Cobb County","4":"Total","5":"256175","6":"3637.0000"},{"1":"2010","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"135975","6":"6516.4576"},{"1":"2010","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"25952","6":"2574.4531"},{"1":"2010","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"11074","6":"1428.0000"},{"1":"2010","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"9862","6":"1224.0000"},{"1":"2010","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"46338","6":"3525.2808"},{"1":"2010","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"29211","6":"2407.0000"},{"1":"2010","2":"13089","3":"DeKalb County","4":"Total","5":"258412","6":"4440.0000"},{"1":"2010","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"21633","6":"2659.1061"},{"1":"2010","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"4973","6":"1273.6032"},{"1":"2010","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"1444","6":"665.0000"},{"1":"2010","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"1281","6":"444.0000"},{"1":"2010","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"9993","6":"1708.8221"},{"1":"2010","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"7430","6":"1479.0000"},{"1":"2010","2":"13097","3":"Douglas County","4":"Total","5":"46754","6":"1594.0000"},{"1":"2010","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"11730","6":"1664.8525"},{"1":"2010","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"8778","6":"1376.8199"},{"1":"2010","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"2999","6":"747.0000"},{"1":"2010","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"2416","6":"629.0000"},{"1":"2010","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"6229","6":"1335.7668"},{"1":"2010","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"5975","6":"1135.0000"},{"1":"2010","2":"13113","3":"Fayette County","4":"Total","5":"38127","6":"1226.0000"},{"1":"2010","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"17059","6":"2050.3231"},{"1":"2010","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"10865","6":"1724.6116"},{"1":"2010","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"4989","6":"1157.0000"},{"1":"2010","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"4711","6":"1058.0000"},{"1":"2010","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"9121","6":"1660.8483"},{"1":"2010","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"8718","6":"1440.0000"},{"1":"2010","2":"13117","3":"Forsyth County","4":"Total","5":"55463","6":"2077.0000"},{"1":"2010","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"168708","6":"6945.3550"},{"1":"2010","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"44131","6":"3289.3434"},{"1":"2010","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"21342","6":"2476.0000"},{"1":"2010","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"29058","6":"2450.0000"},{"1":"2010","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"55634","6":"3986.3490"},{"1":"2010","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"36020","6":"3455.0000"},{"1":"2010","2":"13121","3":"Fulton County","4":"Total","5":"354893","6":"4881.0000"},{"1":"2010","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"115944","6":"5889.2194"},{"1":"2010","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"38359","6":"3002.1321"},{"1":"2010","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"15164","6":"2071.0000"},{"1":"2010","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"9118","6":"1402.0000"},{"1":"2010","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"53130","6":"4010.9356"},{"1":"2010","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"35353","6":"3028.0000"},{"1":"2010","2":"13135","3":"Gwinnett County","4":"Total","5":"267068","6":"2693.0000"},{"1":"2010","2":"13151","3":"Henry County","4":"Less than $50,000","5":"28407","6":"3062.4722"},{"1":"2010","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"10134","6":"1719.2842"},{"1":"2010","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"2069","6":"795.0000"},{"1":"2010","2":"13151","3":"Henry County","4":"$200,000 or more","5":"1690","6":"788.0000"},{"1":"2010","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"15784","6":"2307.1129"},{"1":"2010","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"10737","6":"1601.0000"},{"1":"2010","2":"13151","3":"Henry County","4":"Total","5":"68821","6":"1662.0000"},{"1":"2010","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"12241","6":"1928.8427"},{"1":"2010","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"3537","6":"881.9734"},{"1":"2010","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"1059","6":"631.0000"},{"1":"2010","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"970","6":"384.0000"},{"1":"2010","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"6381","6":"1238.8519"},{"1":"2010","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"4809","6":"1065.0000"},{"1":"2010","2":"13247","3":"Rockdale County","4":"Total","5":"28997","6":"1196.0000"},{"1":"2011","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"29613","6":"3515.3869"},{"1":"2011","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"14020","6":"2202.2361"},{"1":"2011","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"3964","6":"1243.0000"},{"1":"2011","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"2732","6":"1202.0000"},{"1":"2011","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"15037","6":"2630.6594"},{"1":"2011","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"12022","6":"2465.0000"},{"1":"2011","2":"13057","3":"Cherokee County","4":"Total","5":"77388","6":"1585.0000"},{"1":"2011","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"54990","6":"4445.1773"},{"1":"2011","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"5443","6":"1186.2656"},{"1":"2011","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"1154","6":"678.0000"},{"1":"2011","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"332","6":"231.0000"},{"1":"2011","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"17965","6":"2297.2046"},{"1":"2011","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"6863","6":"1271.0000"},{"1":"2011","2":"13063","3":"Clayton County","4":"Total","5":"86747","6":"2579.0000"},{"1":"2011","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"114225","6":"6915.8135"},{"1":"2011","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"36784","6":"3513.0761"},{"1":"2011","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"18584","6":"2438.0000"},{"1":"2011","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"15357","6":"2139.0000"},{"1":"2011","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"45456","6":"4072.0694"},{"1":"2011","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"30171","6":"3366.0000"},{"1":"2011","2":"13067","3":"Cobb County","4":"Total","5":"260577","6":"3929.0000"},{"1":"2011","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"134744","6":"7170.0425"},{"1":"2011","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"30497","6":"3018.7630"},{"1":"2011","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"12943","6":"1519.0000"},{"1":"2011","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"10717","6":"1268.0000"},{"1":"2011","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"46519","6":"4374.1460"},{"1":"2011","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"26742","6":"2990.0000"},{"1":"2011","2":"13089","3":"DeKalb County","4":"Total","5":"262162","6":"4495.0000"},{"1":"2011","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"24115","6":"3430.7980"},{"1":"2011","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"5372","6":"1339.4435"},{"1":"2011","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"1676","6":"772.0000"},{"1":"2011","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"1040","6":"609.0000"},{"1":"2011","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"8565","6":"2061.2290"},{"1":"2011","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"6471","6":"1396.0000"},{"1":"2011","2":"13097","3":"Douglas County","4":"Total","5":"47239","6":"1487.0000"},{"1":"2011","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"12278","6":"1668.2946"},{"1":"2011","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"7017","6":"1317.9549"},{"1":"2011","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"2669","6":"837.0000"},{"1":"2011","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"3005","6":"776.0000"},{"1":"2011","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"7578","6":"1426.1364"},{"1":"2011","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"5903","6":"950.0000"},{"1":"2011","2":"13113","3":"Fayette County","4":"Total","5":"38450","6":"959.0000"},{"1":"2011","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"15305","6":"3368.7085"},{"1":"2011","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"11263","6":"2515.2036"},{"1":"2011","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"4422","6":"1829.0000"},{"1":"2011","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"3905","6":"1517.0000"},{"1":"2011","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"5950","6":"1783.5361"},{"1":"2011","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"7423","6":"2326.0000"},{"1":"2011","2":"13117","3":"Forsyth County","4":"Total","5":"48268","6":"3646.0000"},{"1":"2011","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"172107","6":"7513.4989"},{"1":"2011","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"44103","6":"4328.4385"},{"1":"2011","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"18890","6":"2783.0000"},{"1":"2011","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"34739","6":"3316.0000"},{"1":"2011","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"61811","6":"4979.7450"},{"1":"2011","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"35578","6":"4006.0000"},{"1":"2011","2":"13121","3":"Fulton County","4":"Total","5":"367228","6":"5119.0000"},{"1":"2011","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"118170","6":"8300.3958"},{"1":"2011","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"40138","6":"4549.3298"},{"1":"2011","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"14356","6":"2393.0000"},{"1":"2011","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"9031","6":"1884.0000"},{"1":"2011","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"50166","6":"5378.1704"},{"1":"2011","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"32372","6":"3350.0000"},{"1":"2011","2":"13135","3":"Gwinnett County","4":"Total","5":"264233","6":"4796.0000"},{"1":"2011","2":"13151","3":"Henry County","4":"Less than $50,000","5":"28774","6":"4272.9239"},{"1":"2011","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"10029","6":"1978.8110"},{"1":"2011","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"3226","6":"1096.0000"},{"1":"2011","2":"13151","3":"Henry County","4":"$200,000 or more","5":"1647","6":"967.0000"},{"1":"2011","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"16974","6":"3085.0000"},{"1":"2011","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"10155","6":"2080.0000"},{"1":"2011","2":"13151","3":"Henry County","4":"Total","5":"70805","6":"2549.0000"},{"1":"2011","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"13883","6":"1900.8927"},{"1":"2011","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"3319","6":"1010.7784"},{"1":"2011","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"1356","6":"653.0000"},{"1":"2011","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"385","6":"255.0000"},{"1":"2011","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"6982","6":"1419.6961"},{"1":"2011","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"2864","6":"792.0000"},{"1":"2011","2":"13247","3":"Rockdale County","4":"Total","5":"28789","6":"1479.0000"},{"1":"2012","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"26847","6":"2929.5701"},{"1":"2012","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"13907","6":"2265.0408"},{"1":"2012","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"5583","6":"1261.0000"},{"1":"2012","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"4143","6":"1185.0000"},{"1":"2012","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"13898","6":"2280.3493"},{"1":"2012","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"11396","6":"1865.0000"},{"1":"2012","2":"13057","3":"Cherokee County","4":"Total","5":"75774","6":"1932.0000"},{"1":"2012","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"54201","6":"4149.6118"},{"1":"2012","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"6027","6":"1161.5894"},{"1":"2012","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"1711","6":"970.0000"},{"1":"2012","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"500","6":"266.0000"},{"1":"2012","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"15095","6":"2139.9657"},{"1":"2012","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"9266","6":"1359.0000"},{"1":"2012","2":"13063","3":"Clayton County","4":"Total","5":"86800","6":"2469.0000"},{"1":"2012","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"104410","6":"5636.5591"},{"1":"2012","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"39023","6":"3067.6075"},{"1":"2012","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"17761","6":"2297.0000"},{"1":"2012","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"17994","6":"2233.0000"},{"1":"2012","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"50540","6":"4126.9292"},{"1":"2012","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"35273","6":"2998.0000"},{"1":"2012","2":"13067","3":"Cobb County","4":"Total","5":"265001","6":"3422.0000"},{"1":"2012","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"132616","6":"5834.5508"},{"1":"2012","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"31343","6":"3022.0536"},{"1":"2012","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"11215","6":"1858.0000"},{"1":"2012","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"13719","6":"1401.0000"},{"1":"2012","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"44192","6":"3235.5602"},{"1":"2012","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"28062","6":"2791.0000"},{"1":"2012","2":"13089","3":"DeKalb County","4":"Total","5":"261147","6":"3465.0000"},{"1":"2012","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"22777","6":"2864.6223"},{"1":"2012","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"5467","6":"1229.5499"},{"1":"2012","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"1303","6":"687.0000"},{"1":"2012","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"1034","6":"476.0000"},{"1":"2012","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"9029","6":"1580.0133"},{"1":"2012","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"5931","6":"1340.0000"},{"1":"2012","2":"13097","3":"Douglas County","4":"Total","5":"45541","6":"1787.0000"},{"1":"2012","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"11323","6":"1671.8568"},{"1":"2012","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"7712","6":"1315.5417"},{"1":"2012","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"3390","6":"830.0000"},{"1":"2012","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"3389","6":"810.0000"},{"1":"2012","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"6338","6":"1011.7692"},{"1":"2012","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"4949","6":"1139.0000"},{"1":"2012","2":"13113","3":"Fayette County","4":"Total","5":"37101","6":"1268.0000"},{"1":"2012","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"16708","6":"1793.8473"},{"1":"2012","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"13173","6":"1443.0527"},{"1":"2012","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"6349","6":"1041.0000"},{"1":"2012","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"6184","6":"1002.0000"},{"1":"2012","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"9247","6":"1423.2786"},{"1":"2012","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"6795","6":"1010.0000"},{"1":"2012","2":"13117","3":"Forsyth County","4":"Total","5":"58456","6":"1660.0000"},{"1":"2012","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"170305","6":"7202.3243"},{"1":"2012","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"43237","6":"3264.3813"},{"1":"2012","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"25745","6":"2527.0000"},{"1":"2012","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"36185","6":"2795.0000"},{"1":"2012","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"60502","6":"3856.8024"},{"1":"2012","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"38117","6":"3181.0000"},{"1":"2012","2":"13121","3":"Fulton County","4":"Total","5":"374091","6":"4722.0000"},{"1":"2012","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"118449","6":"6610.4954"},{"1":"2012","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"38272","6":"3153.3246"},{"1":"2012","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"14838","6":"2297.0000"},{"1":"2012","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"12788","6":"1999.0000"},{"1":"2012","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"50204","6":"4166.7313"},{"1":"2012","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"35999","6":"3145.0000"},{"1":"2012","2":"13135","3":"Gwinnett County","4":"Total","5":"270550","6":"3154.0000"},{"1":"2012","2":"13151","3":"Henry County","4":"Less than $50,000","5":"29564","6":"3626.6516"},{"1":"2012","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"8561","6":"1656.0103"},{"1":"2012","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"2777","6":"754.0000"},{"1":"2012","2":"13151","3":"Henry County","4":"$200,000 or more","5":"1777","6":"763.0000"},{"1":"2012","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"17490","6":"2466.2216"},{"1":"2012","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"8945","6":"1519.0000"},{"1":"2012","2":"13151","3":"Henry County","4":"Total","5":"69114","6":"1998.0000"},{"1":"2012","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"14585","6":"1956.8963"},{"1":"2012","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"2848","6":"757.3863"},{"1":"2012","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"1288","6":"592.0000"},{"1":"2012","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"767","6":"437.0000"},{"1":"2012","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"7114","6":"1334.2342"},{"1":"2012","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"2825","6":"743.0000"},{"1":"2012","2":"13247","3":"Rockdale County","4":"Total","5":"29427","6":"1280.0000"},{"1":"2013","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"28996","6":"3369.6736"},{"1":"2013","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"12668","6":"2096.9590"},{"1":"2013","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"4977","6":"1375.0000"},{"1":"2013","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"3643","6":"916.0000"},{"1":"2013","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"13906","6":"2403.1862"},{"1":"2013","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"12437","6":"2278.0000"},{"1":"2013","2":"13057","3":"Cherokee County","4":"Total","5":"76627","6":"1956.0000"},{"1":"2013","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"53614","6":"3983.2937"},{"1":"2013","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"6853","6":"1424.1243"},{"1":"2013","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"1119","6":"459.0000"},{"1":"2013","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"455","6":"275.0000"},{"1":"2013","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"18090","6":"2499.5898"},{"1":"2013","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"8975","6":"1714.0000"},{"1":"2013","2":"13063","3":"Clayton County","4":"Total","5":"89106","6":"2118.0000"},{"1":"2013","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"105558","6":"6207.8172"},{"1":"2013","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"41975","6":"3288.8832"},{"1":"2013","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"17763","6":"2095.0000"},{"1":"2013","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"18245","6":"1826.0000"},{"1":"2013","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"49421","6":"3745.6445"},{"1":"2013","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"33889","6":"2803.0000"},{"1":"2013","2":"13067","3":"Cobb County","4":"Total","5":"266851","6":"3104.0000"},{"1":"2013","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"134497","6":"6331.3156"},{"1":"2013","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"28469","6":"2781.5737"},{"1":"2013","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"13173","6":"1828.0000"},{"1":"2013","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"15774","6":"1767.0000"},{"1":"2013","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"46666","6":"3843.9365"},{"1":"2013","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"29660","6":"2464.0000"},{"1":"2013","2":"13089","3":"DeKalb County","4":"Total","5":"268239","6":"4034.0000"},{"1":"2013","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"23262","6":"2940.6278"},{"1":"2013","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"5036","6":"1113.2282"},{"1":"2013","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"2412","6":"938.0000"},{"1":"2013","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"705","6":"410.0000"},{"1":"2013","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"7878","6":"1575.7148"},{"1":"2013","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"7477","6":"1759.0000"},{"1":"2013","2":"13097","3":"Douglas County","4":"Total","5":"46770","6":"1768.0000"},{"1":"2013","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"10714","6":"1643.4090"},{"1":"2013","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"7614","6":"1440.6783"},{"1":"2013","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"4535","6":"1334.0000"},{"1":"2013","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"2736","6":"785.0000"},{"1":"2013","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"6843","6":"1295.9495"},{"1":"2013","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"5443","6":"1174.0000"},{"1":"2013","2":"13113","3":"Fayette County","4":"Total","5":"37885","6":"1172.0000"},{"1":"2013","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"17994","6":"2041.2829"},{"1":"2013","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"13429","6":"1484.3062"},{"1":"2013","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"6547","6":"1022.0000"},{"1":"2013","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"7336","6":"898.0000"},{"1":"2013","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"10342","6":"1405.9082"},{"1":"2013","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"8817","6":"1020.0000"},{"1":"2013","2":"13117","3":"Forsyth County","4":"Total","5":"64465","6":"1030.0000"},{"1":"2013","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"170931","6":"7417.5376"},{"1":"2013","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"46414","6":"3481.5779"},{"1":"2013","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"21743","6":"2109.0000"},{"1":"2013","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"37585","6":"2412.0000"},{"1":"2013","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"62522","6":"4852.2417"},{"1":"2013","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"40086","6":"3369.0000"},{"1":"2013","2":"13121","3":"Fulton County","4":"Total","5":"379281","6":"4751.0000"},{"1":"2013","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"113800","6":"6712.1447"},{"1":"2013","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"40843","6":"3655.7694"},{"1":"2013","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"14940","6":"2238.0000"},{"1":"2013","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"9931","6":"1566.0000"},{"1":"2013","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"52694","6":"4402.9187"},{"1":"2013","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"37153","6":"3226.0000"},{"1":"2013","2":"13135","3":"Gwinnett County","4":"Total","5":"269361","6":"3943.0000"},{"1":"2013","2":"13151","3":"Henry County","4":"Less than $50,000","5":"29863","6":"3493.8022"},{"1":"2013","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"11751","6":"2106.2426"},{"1":"2013","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"3287","6":"995.0000"},{"1":"2013","2":"13151","3":"Henry County","4":"$200,000 or more","5":"1236","6":"611.0000"},{"1":"2013","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"15638","6":"2461.9448"},{"1":"2013","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"9077","6":"1595.0000"},{"1":"2013","2":"13151","3":"Henry County","4":"Total","5":"70852","6":"1899.0000"},{"1":"2013","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"14640","6":"2025.1336"},{"1":"2013","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"2438","6":"785.7207"},{"1":"2013","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"1135","6":"584.0000"},{"1":"2013","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"566","6":"351.0000"},{"1":"2013","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"5727","6":"1218.5869"},{"1":"2013","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"4644","6":"1140.0000"},{"1":"2013","2":"13247","3":"Rockdale County","4":"Total","5":"29150","6":"1147.0000"},{"1":"2014","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"26665","6":"3327.3874"},{"1":"2014","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"15099","6":"2360.8477"},{"1":"2014","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"4489","6":"922.0000"},{"1":"2014","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"5678","6":"1485.0000"},{"1":"2014","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"17269","6":"2454.9090"},{"1":"2014","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"12791","6":"1918.0000"},{"1":"2014","2":"13057","3":"Cherokee County","4":"Total","5":"81991","6":"1330.0000"},{"1":"2014","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"51597","6":"3872.0573"},{"1":"2014","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"5521","6":"1356.6938"},{"1":"2014","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"1922","6":"795.0000"},{"1":"2014","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"1160","6":"596.0000"},{"1":"2014","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"17571","6":"2098.2016"},{"1":"2014","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"10767","6":"1763.0000"},{"1":"2014","2":"13063","3":"Clayton County","4":"Total","5":"88538","6":"2223.0000"},{"1":"2014","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"104437","6":"5842.0864"},{"1":"2014","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"42892","6":"3364.8514"},{"1":"2014","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"21206","6":"2103.0000"},{"1":"2014","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"21625","6":"2221.0000"},{"1":"2014","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"45655","6":"3211.5238"},{"1":"2014","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"35871","6":"3092.0000"},{"1":"2014","2":"13067","3":"Cobb County","4":"Total","5":"271686","6":"3118.0000"},{"1":"2014","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"131488","6":"6133.5444"},{"1":"2014","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"29546","6":"2623.2242"},{"1":"2014","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"13103","6":"1542.0000"},{"1":"2014","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"16972","6":"1649.0000"},{"1":"2014","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"45449","6":"3647.6136"},{"1":"2014","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"29749","6":"2478.0000"},{"1":"2014","2":"13089","3":"DeKalb County","4":"Total","5":"266307","6":"3560.0000"},{"1":"2014","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"21308","6":"2541.2841"},{"1":"2014","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"5156","6":"1342.8217"},{"1":"2014","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"2227","6":"792.0000"},{"1":"2014","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"1238","6":"557.0000"},{"1":"2014","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"11638","6":"1902.5357"},{"1":"2014","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"6120","6":"1448.0000"},{"1":"2014","2":"13097","3":"Douglas County","4":"Total","5":"47687","6":"1470.0000"},{"1":"2014","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"13004","6":"1824.5375"},{"1":"2014","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"6583","6":"1197.9224"},{"1":"2014","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"3912","6":"790.0000"},{"1":"2014","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"3558","6":"728.0000"},{"1":"2014","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"5846","6":"1253.3124"},{"1":"2014","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"6042","6":"994.0000"},{"1":"2014","2":"13113","3":"Fayette County","4":"Total","5":"38945","6":"1157.0000"},{"1":"2014","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"18000","6":"1939.5750"},{"1":"2014","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"14202","6":"1341.4805"},{"1":"2014","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"6735","6":"1090.0000"},{"1":"2014","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"7408","6":"919.0000"},{"1":"2014","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"10779","6":"1474.1757"},{"1":"2014","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"9305","6":"1449.0000"},{"1":"2014","2":"13117","3":"Forsyth County","4":"Total","5":"66429","6":"1307.0000"},{"1":"2014","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"171346","6":"7133.6415"},{"1":"2014","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"49097","6":"3839.0001"},{"1":"2014","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"24489","6":"2626.0000"},{"1":"2014","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"38527","6":"2491.0000"},{"1":"2014","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"61868","6":"4419.5534"},{"1":"2014","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"36663","6":"2987.0000"},{"1":"2014","2":"13121","3":"Fulton County","4":"Total","5":"381990","6":"4537.0000"},{"1":"2014","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"116812","6":"6492.8246"},{"1":"2014","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"40739","6":"3450.3555"},{"1":"2014","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"16374","6":"2234.0000"},{"1":"2014","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"13172","6":"1776.0000"},{"1":"2014","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"53709","6":"4267.4565"},{"1":"2014","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"37846","6":"3509.0000"},{"1":"2014","2":"13135","3":"Gwinnett County","4":"Total","5":"278652","6":"3287.0000"},{"1":"2014","2":"13151","3":"Henry County","4":"Less than $50,000","5":"27124","6":"3098.9758"},{"1":"2014","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"9360","6":"1786.3149"},{"1":"2014","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"3025","6":"1040.0000"},{"1":"2014","2":"13151","3":"Henry County","4":"$200,000 or more","5":"1589","6":"590.0000"},{"1":"2014","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"17056","6":"2415.8493"},{"1":"2014","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"10370","6":"2038.0000"},{"1":"2014","2":"13151","3":"Henry County","4":"Total","5":"68524","6":"1931.0000"},{"1":"2014","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"15992","6":"2234.0848"},{"1":"2014","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"3429","6":"785.0204"},{"1":"2014","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"899","6":"447.0000"},{"1":"2014","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"596","6":"315.0000"},{"1":"2014","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"4991","6":"1103.5253"},{"1":"2014","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"3800","6":"960.0000"},{"1":"2014","2":"13247","3":"Rockdale County","4":"Total","5":"29707","6":"1045.0000"},{"1":"2015","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"27153","6":"3190.8635"},{"1":"2015","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"16054","6":"2287.6199"},{"1":"2015","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"7527","6":"1624.0000"},{"1":"2015","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"4579","6":"1309.0000"},{"1":"2015","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"14734","6":"2538.0601"},{"1":"2015","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"12617","6":"1786.0000"},{"1":"2015","2":"13057","3":"Cherokee County","4":"Total","5":"82664","6":"1576.0000"},{"1":"2015","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"52274","6":"3859.4571"},{"1":"2015","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"6925","6":"1440.2278"},{"1":"2015","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"2053","6":"793.0000"},{"1":"2015","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"857","6":"424.0000"},{"1":"2015","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"18419","6":"1971.2760"},{"1":"2015","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"9845","6":"1817.0000"},{"1":"2015","2":"13063","3":"Clayton County","4":"Total","5":"90373","6":"2455.0000"},{"1":"2015","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"97194","6":"5421.6885"},{"1":"2015","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"47549","6":"3510.1618"},{"1":"2015","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"20550","6":"2219.0000"},{"1":"2015","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"21129","6":"1739.0000"},{"1":"2015","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"51176","6":"3877.5521"},{"1":"2015","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"36870","6":"2871.0000"},{"1":"2015","2":"13067","3":"Cobb County","4":"Total","5":"274468","6":"2387.0000"},{"1":"2015","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"126591","6":"6153.4517"},{"1":"2015","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"35100","6":"2674.1672"},{"1":"2015","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"14218","6":"1867.0000"},{"1":"2015","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"18633","6":"2040.0000"},{"1":"2015","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"52861","6":"4435.9474"},{"1":"2015","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"29228","6":"2733.0000"},{"1":"2015","2":"13089","3":"DeKalb County","4":"Total","5":"276631","6":"3434.0000"},{"1":"2015","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"19435","6":"2705.3301"},{"1":"2015","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"7019","6":"1519.8964"},{"1":"2015","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"2279","6":"807.0000"},{"1":"2015","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"891","6":"507.0000"},{"1":"2015","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"12560","6":"1884.6352"},{"1":"2015","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"6309","6":"1183.0000"},{"1":"2015","2":"13097","3":"Douglas County","4":"Total","5":"48493","6":"1326.0000"},{"1":"2015","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"12279","6":"1883.5119"},{"1":"2015","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"7722","6":"1409.9677"},{"1":"2015","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"3560","6":"895.0000"},{"1":"2015","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"4846","6":"1015.0000"},{"1":"2015","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"6589","6":"1355.7596"},{"1":"2015","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"4711","6":"915.0000"},{"1":"2015","2":"13113","3":"Fayette County","4":"Total","5":"39707","6":"900.0000"},{"1":"2015","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"17068","6":"1947.6150"},{"1":"2015","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"16666","6":"1689.8429"},{"1":"2015","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"8585","6":"1300.0000"},{"1":"2015","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"8367","6":"1135.0000"},{"1":"2015","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"10955","6":"1283.4150"},{"1":"2015","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"8392","6":"931.0000"},{"1":"2015","2":"13117","3":"Forsyth County","4":"Total","5":"70033","6":"1252.0000"},{"1":"2015","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"169663","6":"7812.1357"},{"1":"2015","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"52749","6":"3691.8941"},{"1":"2015","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"24975","6":"2413.0000"},{"1":"2015","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"42786","6":"2571.0000"},{"1":"2015","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"61761","6":"4359.8620"},{"1":"2015","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"40860","6":"3320.0000"},{"1":"2015","2":"13121","3":"Fulton County","4":"Total","5":"392794","6":"4407.0000"},{"1":"2015","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"110018","6":"5860.1235"},{"1":"2015","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"44916","6":"3425.0707"},{"1":"2015","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"16819","6":"2018.0000"},{"1":"2015","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"13821","6":"1869.0000"},{"1":"2015","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"58925","6":"4303.7027"},{"1":"2015","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"40132","6":"3419.0000"},{"1":"2015","2":"13135","3":"Gwinnett County","4":"Total","5":"284631","6":"2842.0000"},{"1":"2015","2":"13151","3":"Henry County","4":"Less than $50,000","5":"27131","6":"3150.0663"},{"1":"2015","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"11642","6":"2024.4135"},{"1":"2015","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"3301","6":"943.0000"},{"1":"2015","2":"13151","3":"Henry County","4":"$200,000 or more","5":"2374","6":"792.0000"},{"1":"2015","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"14729","6":"2246.5129"},{"1":"2015","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"12504","6":"1941.0000"},{"1":"2015","2":"13151","3":"Henry County","4":"Total","5":"71681","6":"2077.0000"},{"1":"2015","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"15286","6":"2014.5821"},{"1":"2015","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"3954","6":"1283.7496"},{"1":"2015","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"1601","6":"736.0000"},{"1":"2015","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"435","6":"313.0000"},{"1":"2015","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"6819","6":"1464.5221"},{"1":"2015","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"3136","6":"907.0000"},{"1":"2015","2":"13247","3":"Rockdale County","4":"Total","5":"31231","6":"1007.0000"},{"1":"2016","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"23031","6":"2745.1794"},{"1":"2016","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"17159","6":"2679.6061"},{"1":"2016","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"8230","6":"1915.0000"},{"1":"2016","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"6248","6":"1213.0000"},{"1":"2016","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"16377","6":"2475.1034"},{"1":"2016","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"13043","6":"2565.0000"},{"1":"2016","2":"13057","3":"Cherokee County","4":"Total","5":"84088","6":"1934.0000"},{"1":"2016","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"51955","6":"3750.4926"},{"1":"2016","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"8546","6":"1625.4910"},{"1":"2016","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"1104","6":"417.0000"},{"1":"2016","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"1665","6":"837.0000"},{"1":"2016","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"20421","6":"2581.8259"},{"1":"2016","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"10655","6":"1612.0000"},{"1":"2016","2":"13063","3":"Clayton County","4":"Total","5":"94346","6":"2051.0000"},{"1":"2016","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"94946","6":"6071.5559"},{"1":"2016","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"47957","6":"3741.3074"},{"1":"2016","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"23537","6":"2812.0000"},{"1":"2016","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"23991","6":"2219.0000"},{"1":"2016","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"51417","6":"4085.8861"},{"1":"2016","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"36101","6":"2756.0000"},{"1":"2016","2":"13067","3":"Cobb County","4":"Total","5":"277949","6":"2711.0000"},{"1":"2016","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"125836","6":"6391.6823"},{"1":"2016","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"37047","6":"3022.2392"},{"1":"2016","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"16545","6":"2055.0000"},{"1":"2016","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"19772","6":"2096.0000"},{"1":"2016","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"50845","6":"3992.3960"},{"1":"2016","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"31311","6":"2930.0000"},{"1":"2016","2":"13089","3":"DeKalb County","4":"Total","5":"281356","6":"3760.0000"},{"1":"2016","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"19954","6":"2555.9642"},{"1":"2016","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"8493","6":"1592.6622"},{"1":"2016","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"2862","6":"845.0000"},{"1":"2016","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"1733","6":"764.0000"},{"1":"2016","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"8868","6":"1431.8338"},{"1":"2016","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"6991","6":"1808.0000"},{"1":"2016","2":"13097","3":"Douglas County","4":"Total","5":"48901","6":"1209.0000"},{"1":"2016","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"10161","6":"1716.2226"},{"1":"2016","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"6932","6":"1221.6075"},{"1":"2016","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"3854","6":"997.0000"},{"1":"2016","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"4985","6":"1051.0000"},{"1":"2016","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"8147","6":"1457.3030"},{"1":"2016","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"5967","6":"1308.0000"},{"1":"2016","2":"13113","3":"Fayette County","4":"Total","5":"40046","6":"922.0000"},{"1":"2016","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"16936","6":"1897.6986"},{"1":"2016","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"16371","6":"1671.8953"},{"1":"2016","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"9878","6":"1143.0000"},{"1":"2016","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"10508","6":"1184.0000"},{"1":"2016","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"9563","6":"1383.4949"},{"1":"2016","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"8952","6":"1170.0000"},{"1":"2016","2":"13117","3":"Forsyth County","4":"Total","5":"72208","6":"1311.0000"},{"1":"2016","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"159444","6":"7754.2843"},{"1":"2016","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"53816","6":"3928.3204"},{"1":"2016","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"24897","6":"2173.0000"},{"1":"2016","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"47087","6":"3394.0000"},{"1":"2016","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"67432","6":"5045.4805"},{"1":"2016","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"43508","6":"3957.0000"},{"1":"2016","2":"13121","3":"Fulton County","4":"Total","5":"396184","6":"4547.0000"},{"1":"2016","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"104622","6":"6073.0140"},{"1":"2016","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"44684","6":"3931.3429"},{"1":"2016","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"18719","6":"2122.0000"},{"1":"2016","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"18227","6":"2729.0000"},{"1":"2016","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"55943","6":"4686.5527"},{"1":"2016","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"48210","6":"4174.0000"},{"1":"2016","2":"13135","3":"Gwinnett County","4":"Total","5":"290405","6":"2752.0000"},{"1":"2016","2":"13151","3":"Henry County","4":"Less than $50,000","5":"27613","6":"3231.9251"},{"1":"2016","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"11995","6":"2062.2136"},{"1":"2016","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"3530","6":"1081.0000"},{"1":"2016","2":"13151","3":"Henry County","4":"$200,000 or more","5":"3628","6":"1058.0000"},{"1":"2016","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"14584","6":"2366.9256"},{"1":"2016","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"13123","6":"2100.0000"},{"1":"2016","2":"13151","3":"Henry County","4":"Total","5":"74473","6":"1560.0000"},{"1":"2016","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"12793","6":"2020.5811"},{"1":"2016","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"4365","6":"1165.1905"},{"1":"2016","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"1323","6":"635.0000"},{"1":"2016","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"965","6":"504.0000"},{"1":"2016","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"6785","6":"1472.3943"},{"1":"2016","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"4150","6":"1039.0000"},{"1":"2016","2":"13247","3":"Rockdale County","4":"Total","5":"30381","6":"1165.0000"},{"1":"2017","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"26588","6":"3170.0847"},{"1":"2017","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"19207","6":"2733.6752"},{"1":"2017","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"7311","6":"1392.0000"},{"1":"2017","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"6127","6":"1462.0000"},{"1":"2017","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"17389","6":"2357.1383"},{"1":"2017","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"12888","6":"2019.0000"},{"1":"2017","2":"13057","3":"Cherokee County","4":"Total","5":"89510","6":"1418.0000"},{"1":"2017","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"52413","6":"4316.2867"},{"1":"2017","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"7322","6":"1428.5927"},{"1":"2017","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"1166","6":"662.0000"},{"1":"2017","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"897","6":"474.0000"},{"1":"2017","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"19655","6":"2561.1068"},{"1":"2017","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"12746","6":"1740.0000"},{"1":"2017","2":"13063","3":"Clayton County","4":"Total","5":"94199","6":"2084.0000"},{"1":"2017","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"92493","6":"5664.8819"},{"1":"2017","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"48603","6":"3665.0307"},{"1":"2017","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"27199","6":"2415.0000"},{"1":"2017","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"26418","6":"2466.0000"},{"1":"2017","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"45209","6":"3705.1748"},{"1":"2017","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"37687","6":"3057.0000"},{"1":"2017","2":"13067","3":"Cobb County","4":"Total","5":"277609","6":"3623.0000"},{"1":"2017","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"110589","6":"5949.9096"},{"1":"2017","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"38316","6":"3375.3841"},{"1":"2017","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"17786","6":"2083.0000"},{"1":"2017","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"22553","6":"2008.0000"},{"1":"2017","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"52829","6":"4372.5530"},{"1":"2017","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"36176","6":"3595.0000"},{"1":"2017","2":"13089","3":"DeKalb County","4":"Total","5":"278249","6":"3395.0000"},{"1":"2017","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"20713","6":"2820.5624"},{"1":"2017","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"7141","6":"1518.2022"},{"1":"2017","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"3008","6":"891.0000"},{"1":"2017","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"1163","6":"528.0000"},{"1":"2017","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"10392","6":"2208.6496"},{"1":"2017","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"7545","6":"1513.0000"},{"1":"2017","2":"13097","3":"Douglas County","4":"Total","5":"49962","6":"1073.0000"},{"1":"2017","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"10684","6":"1954.7808"},{"1":"2017","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"8241","6":"1420.9338"},{"1":"2017","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"5088","6":"918.0000"},{"1":"2017","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"4055","6":"904.0000"},{"1":"2017","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"7543","6":"1578.6972"},{"1":"2017","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"4873","6":"923.0000"},{"1":"2017","2":"13113","3":"Fayette County","4":"Total","5":"40484","6":"851.0000"},{"1":"2017","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"15884","6":"1880.5305"},{"1":"2017","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"17181","6":"1630.7262"},{"1":"2017","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"10554","6":"1278.0000"},{"1":"2017","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"12881","6":"1298.0000"},{"1":"2017","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"11606","6":"1541.6588"},{"1":"2017","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"10193","6":"1439.0000"},{"1":"2017","2":"13117","3":"Forsyth County","4":"Total","5":"78299","6":"925.0000"},{"1":"2017","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"160553","6":"8222.0831"},{"1":"2017","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"56511","6":"4195.3475"},{"1":"2017","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"27085","6":"2227.0000"},{"1":"2017","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"54000","6":"2872.0000"},{"1":"2017","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"69910","6":"5711.3491"},{"1":"2017","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"42349","6":"3636.0000"},{"1":"2017","2":"13121","3":"Fulton County","4":"Total","5":"410408","6":"5779.0000"},{"1":"2017","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"101014","6":"6094.8091"},{"1":"2017","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"50538","6":"3797.9117"},{"1":"2017","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"20847","6":"1896.0000"},{"1":"2017","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"19717","6":"2065.0000"},{"1":"2017","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"57123","6":"4738.3231"},{"1":"2017","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"43440","6":"3845.0000"},{"1":"2017","2":"13135","3":"Gwinnett County","4":"Total","5":"292679","6":"3132.0000"},{"1":"2017","2":"13151","3":"Henry County","4":"Less than $50,000","5":"27305","6":"3397.9061"},{"1":"2017","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"12445","6":"2281.2124"},{"1":"2017","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"4567","6":"1281.0000"},{"1":"2017","2":"13151","3":"Henry County","4":"$200,000 or more","5":"3147","6":"1042.0000"},{"1":"2017","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"15263","6":"2336.0009"},{"1":"2017","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"14443","6":"2237.0000"},{"1":"2017","2":"13151","3":"Henry County","4":"Total","5":"77170","6":"1577.0000"},{"1":"2017","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"11289","6":"2031.5575"},{"1":"2017","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"4431","6":"1215.0823"},{"1":"2017","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"1587","6":"795.0000"},{"1":"2017","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"1720","6":"779.0000"},{"1":"2017","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"6684","6":"1519.8766"},{"1":"2017","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"4138","6":"1182.0000"},{"1":"2017","2":"13247","3":"Rockdale County","4":"Total","5":"29849","6":"1103.0000"},{"1":"2018","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"27696","6":"3250.1643"},{"1":"2018","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"18979","6":"2349.5508"},{"1":"2018","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"7998","6":"1428.0000"},{"1":"2018","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"9159","6":"1956.0000"},{"1":"2018","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"13473","6":"1986.3084"},{"1":"2018","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"12669","6":"2021.0000"},{"1":"2018","2":"13057","3":"Cherokee County","4":"Total","5":"89974","6":"1560.0000"},{"1":"2018","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"50460","6":"4482.7659"},{"1":"2018","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"11521","6":"2182.2248"},{"1":"2018","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"1635","6":"747.0000"},{"1":"2018","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"868","6":"372.0000"},{"1":"2018","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"20092","6":"2700.5601"},{"1":"2018","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"11710","6":"2513.0000"},{"1":"2018","2":"13063","3":"Clayton County","4":"Total","5":"96286","6":"2093.0000"},{"1":"2018","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"82893","6":"5558.1274"},{"1":"2018","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"50404","6":"3450.2355"},{"1":"2018","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"27108","6":"2540.0000"},{"1":"2018","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"32675","6":"2761.0000"},{"1":"2018","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"51549","6":"4014.0379"},{"1":"2018","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"38465","6":"3240.0000"},{"1":"2018","2":"13067","3":"Cobb County","4":"Total","5":"283094","6":"3547.0000"},{"1":"2018","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"112591","6":"6278.6913"},{"1":"2018","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"43682","6":"3650.8815"},{"1":"2018","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"19333","6":"1768.0000"},{"1":"2018","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"26329","6":"2174.0000"},{"1":"2018","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"49467","6":"3798.9843"},{"1":"2018","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"35599","6":"3860.0000"},{"1":"2018","2":"13089","3":"DeKalb County","4":"Total","5":"287001","6":"3281.0000"},{"1":"2018","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"20648","6":"3209.0899"},{"1":"2018","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"10198","6":"1971.4058"},{"1":"2018","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"3079","6":"1111.0000"},{"1":"2018","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"1844","6":"664.0000"},{"1":"2018","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"9141","6":"1794.0931"},{"1":"2018","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"4624","6":"1229.0000"},{"1":"2018","2":"13097","3":"Douglas County","4":"Total","5":"49534","6":"1582.0000"},{"1":"2018","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"9795","6":"1696.3909"},{"1":"2018","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"8001","6":"1418.4291"},{"1":"2018","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"3971","6":"1138.0000"},{"1":"2018","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"6793","6":"998.0000"},{"1":"2018","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"5782","6":"1113.1150"},{"1":"2018","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"5024","6":"1238.0000"},{"1":"2018","2":"13113","3":"Fayette County","4":"Total","5":"39366","6":"1116.0000"},{"1":"2018","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"16675","6":"1849.9405"},{"1":"2018","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"18688","6":"1824.9792"},{"1":"2018","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"9145","6":"1290.0000"},{"1":"2018","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"15378","6":"1501.0000"},{"1":"2018","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"10514","6":"1762.0786"},{"1":"2018","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"10953","6":"1475.0000"},{"1":"2018","2":"13117","3":"Forsyth County","4":"Total","5":"81353","6":"873.0000"},{"1":"2018","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"146559","6":"7444.9273"},{"1":"2018","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"57294","6":"4416.2484"},{"1":"2018","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"32822","6":"3584.0000"},{"1":"2018","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"60286","6":"3469.0000"},{"1":"2018","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"73774","6":"5015.4486"},{"1":"2018","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"46422","6":"4071.0000"},{"1":"2018","2":"13121","3":"Fulton County","4":"Total","5":"417157","6":"5974.0000"},{"1":"2018","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"100340","6":"6263.0684"},{"1":"2018","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"53178","6":"4158.7596"},{"1":"2018","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"23850","6":"2810.0000"},{"1":"2018","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"19893","6":"2319.0000"},{"1":"2018","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"53545","6":"4251.5814"},{"1":"2018","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"46852","6":"4149.0000"},{"1":"2018","2":"13135","3":"Gwinnett County","4":"Total","5":"297658","6":"2747.0000"},{"1":"2018","2":"13151","3":"Henry County","4":"Less than $50,000","5":"23592","6":"2924.0068"},{"1":"2018","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"14330","6":"2376.6405"},{"1":"2018","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"6911","6":"1749.0000"},{"1":"2018","2":"13151","3":"Henry County","4":"$200,000 or more","5":"4921","6":"1535.0000"},{"1":"2018","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"14898","6":"2442.2041"},{"1":"2018","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"11274","6":"1953.0000"},{"1":"2018","2":"13151","3":"Henry County","4":"Total","5":"75926","6":"1908.0000"},{"1":"2018","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"12241","6":"2024.8057"},{"1":"2018","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"5769","6":"1508.0998"},{"1":"2018","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"1689","6":"839.0000"},{"1":"2018","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"1673","6":"617.0000"},{"1":"2018","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"6248","6":"1457.5723"},{"1":"2018","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"3840","6":"1003.0000"},{"1":"2018","2":"13247","3":"Rockdale County","4":"Total","5":"31460","6":"985.0000"},{"1":"2019","2":"13057","3":"Cherokee County","4":"Less than $50,000","5":"23465","6":"3218.5706"},{"1":"2019","2":"13057","3":"Cherokee County","4":"$100,000 to $149,999","5":"20342","6":"2996.8225"},{"1":"2019","2":"13057","3":"Cherokee County","4":"$150,000 to $199,999","5":"10254","6":"1983.0000"},{"1":"2019","2":"13057","3":"Cherokee County","4":"$200,000 or more","5":"8610","6":"1638.0000"},{"1":"2019","2":"13057","3":"Cherokee County","4":"$50,000 to $74,999","5":"17647","6":"2796.1688"},{"1":"2019","2":"13057","3":"Cherokee County","4":"$75,000 to $99,999","5":"13123","6":"2197.0000"},{"1":"2019","2":"13057","3":"Cherokee County","4":"Total","5":"93441","6":"1407.0000"},{"1":"2019","2":"13063","3":"Clayton County","4":"Less than $50,000","5":"46675","6":"4586.8523"},{"1":"2019","2":"13063","3":"Clayton County","4":"$100,000 to $149,999","5":"11122","6":"2220.5758"},{"1":"2019","2":"13063","3":"Clayton County","4":"$150,000 to $199,999","5":"3462","6":"1562.0000"},{"1":"2019","2":"13063","3":"Clayton County","4":"$200,000 or more","5":"1121","6":"539.0000"},{"1":"2019","2":"13063","3":"Clayton County","4":"$50,000 to $74,999","5":"24464","6":"3455.3473"},{"1":"2019","2":"13063","3":"Clayton County","4":"$75,000 to $99,999","5":"10186","6":"1545.0000"},{"1":"2019","2":"13063","3":"Clayton County","4":"Total","5":"97030","6":"1802.0000"},{"1":"2019","2":"13067","3":"Cobb County","4":"Less than $50,000","5":"85221","6":"6164.5731"},{"1":"2019","2":"13067","3":"Cobb County","4":"$100,000 to $149,999","5":"48761","6":"3809.2189"},{"1":"2019","2":"13067","3":"Cobb County","4":"$150,000 to $199,999","5":"28694","6":"2946.0000"},{"1":"2019","2":"13067","3":"Cobb County","4":"$200,000 or more","5":"33633","6":"3009.0000"},{"1":"2019","2":"13067","3":"Cobb County","4":"$50,000 to $74,999","5":"49883","6":"4555.7262"},{"1":"2019","2":"13067","3":"Cobb County","4":"$75,000 to $99,999","5":"40760","6":"3676.0000"},{"1":"2019","2":"13067","3":"Cobb County","4":"Total","5":"286952","6":"3167.0000"},{"1":"2019","2":"13089","3":"DeKalb County","4":"Less than $50,000","5":"115512","6":"6955.3656"},{"1":"2019","2":"13089","3":"DeKalb County","4":"$100,000 to $149,999","5":"38595","6":"3298.1040"},{"1":"2019","2":"13089","3":"DeKalb County","4":"$150,000 to $199,999","5":"18890","6":"2727.0000"},{"1":"2019","2":"13089","3":"DeKalb County","4":"$200,000 or more","5":"30574","6":"2202.0000"},{"1":"2019","2":"13089","3":"DeKalb County","4":"$50,000 to $74,999","5":"49466","6":"4177.1821"},{"1":"2019","2":"13089","3":"DeKalb County","4":"$75,000 to $99,999","5":"36792","6":"3239.0000"},{"1":"2019","2":"13089","3":"DeKalb County","4":"Total","5":"289829","6":"3342.0000"},{"1":"2019","2":"13097","3":"Douglas County","4":"Less than $50,000","5":"19722","6":"3156.7814"},{"1":"2019","2":"13097","3":"Douglas County","4":"$100,000 to $149,999","5":"7517","6":"1876.8745"},{"1":"2019","2":"13097","3":"Douglas County","4":"$150,000 to $199,999","5":"3113","6":"1274.0000"},{"1":"2019","2":"13097","3":"Douglas County","4":"$200,000 or more","5":"2313","6":"951.0000"},{"1":"2019","2":"13097","3":"Douglas County","4":"$50,000 to $74,999","5":"8749","6":"1841.5724"},{"1":"2019","2":"13097","3":"Douglas County","4":"$75,000 to $99,999","5":"7485","6":"1606.0000"},{"1":"2019","2":"13097","3":"Douglas County","4":"Total","5":"48899","6":"1680.0000"},{"1":"2019","2":"13113","3":"Fayette County","4":"Less than $50,000","5":"8751","6":"1644.8137"},{"1":"2019","2":"13113","3":"Fayette County","4":"$100,000 to $149,999","5":"7971","6":"1390.9342"},{"1":"2019","2":"13113","3":"Fayette County","4":"$150,000 to $199,999","5":"4188","6":"1057.0000"},{"1":"2019","2":"13113","3":"Fayette County","4":"$200,000 or more","5":"6733","6":"949.0000"},{"1":"2019","2":"13113","3":"Fayette County","4":"$50,000 to $74,999","5":"7598","6":"1529.6643"},{"1":"2019","2":"13113","3":"Fayette County","4":"$75,000 to $99,999","5":"6012","6":"1193.0000"},{"1":"2019","2":"13113","3":"Fayette County","4":"Total","5":"41253","6":"1092.0000"},{"1":"2019","2":"13117","3":"Forsyth County","4":"Less than $50,000","5":"14545","6":"1926.9105"},{"1":"2019","2":"13117","3":"Forsyth County","4":"$100,000 to $149,999","5":"18360","6":"1910.9893"},{"1":"2019","2":"13117","3":"Forsyth County","4":"$150,000 to $199,999","5":"12475","6":"1392.0000"},{"1":"2019","2":"13117","3":"Forsyth County","4":"$200,000 or more","5":"15466","6":"1442.0000"},{"1":"2019","2":"13117","3":"Forsyth County","4":"$50,000 to $74,999","5":"11794","6":"1629.9644"},{"1":"2019","2":"13117","3":"Forsyth County","4":"$75,000 to $99,999","5":"9125","6":"1402.0000"},{"1":"2019","2":"13117","3":"Forsyth County","4":"Total","5":"81765","6":"1731.0000"},{"1":"2019","2":"13121","3":"Fulton County","4":"Less than $50,000","5":"144465","6":"8149.7817"},{"1":"2019","2":"13121","3":"Fulton County","4":"$100,000 to $149,999","5":"70922","6":"5899.3791"},{"1":"2019","2":"13121","3":"Fulton County","4":"$150,000 to $199,999","5":"39845","6":"3577.0000"},{"1":"2019","2":"13121","3":"Fulton County","4":"$200,000 or more","5":"71258","6":"4430.0000"},{"1":"2019","2":"13121","3":"Fulton County","4":"$50,000 to $74,999","5":"63202","6":"5388.3328"},{"1":"2019","2":"13121","3":"Fulton County","4":"$75,000 to $99,999","5":"49886","6":"5058.0000"},{"1":"2019","2":"13121","3":"Fulton County","4":"Total","5":"439578","6":"4514.0000"},{"1":"2019","2":"13135","3":"Gwinnett County","4":"Less than $50,000","5":"96763","6":"7081.8387"},{"1":"2019","2":"13135","3":"Gwinnett County","4":"$100,000 to $149,999","5":"55559","6":"4983.7613"},{"1":"2019","2":"13135","3":"Gwinnett County","4":"$150,000 to $199,999","5":"25516","6":"2796.0000"},{"1":"2019","2":"13135","3":"Gwinnett County","4":"$200,000 or more","5":"22941","6":"2730.0000"},{"1":"2019","2":"13135","3":"Gwinnett County","4":"$50,000 to $74,999","5":"59260","6":"5425.2530"},{"1":"2019","2":"13135","3":"Gwinnett County","4":"$75,000 to $99,999","5":"41432","6":"4311.0000"},{"1":"2019","2":"13135","3":"Gwinnett County","4":"Total","5":"301471","6":"3216.0000"},{"1":"2019","2":"13151","3":"Henry County","4":"Less than $50,000","5":"23521","6":"3520.1253"},{"1":"2019","2":"13151","3":"Henry County","4":"$100,000 to $149,999","5":"16268","6":"2404.0620"},{"1":"2019","2":"13151","3":"Henry County","4":"$150,000 to $199,999","5":"5565","6":"1541.0000"},{"1":"2019","2":"13151","3":"Henry County","4":"$200,000 or more","5":"4768","6":"1391.0000"},{"1":"2019","2":"13151","3":"Henry County","4":"$50,000 to $74,999","5":"17386","6":"3383.3061"},{"1":"2019","2":"13151","3":"Henry County","4":"$75,000 to $99,999","5":"12042","6":"2221.0000"},{"1":"2019","2":"13151","3":"Henry County","4":"Total","5":"79550","6":"1820.0000"},{"1":"2019","2":"13247","3":"Rockdale County","4":"Less than $50,000","5":"13651","6":"2425.5669"},{"1":"2019","2":"13247","3":"Rockdale County","4":"$100,000 to $149,999","5":"6113","6":"1467.9227"},{"1":"2019","2":"13247","3":"Rockdale County","4":"$150,000 to $199,999","5":"712","6":"437.0000"},{"1":"2019","2":"13247","3":"Rockdale County","4":"$200,000 or more","5":"2052","6":"878.0000"},{"1":"2019","2":"13247","3":"Rockdale County","4":"$50,000 to $74,999","5":"5661","6":"1551.1044"},{"1":"2019","2":"13247","3":"Rockdale County","4":"$75,000 to $99,999","5":"4603","6":"1238.0000"},{"1":"2019","2":"13247","3":"Rockdale County","4":"Total","5":"32792","6":"684.0000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    df_income_distribution,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;data-files/income_distribution_by_year_county.csv&quot;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="how-has-the-income-distribution-changed-over-the-years-across-the-atlanta-area" class="section level2" number="2.1">
<h2 number="2.1"><span class="header-section-number">2.1</span> How has the income distribution changed over the years across the Atlanta area?</h2>
<p>To answer this, we summarize over all the counties the number of households in each income bracket, along with the total number, and do so for each year. The margin of errors give 90% confidence intervals of each estimate; to get the margin of error for a sum of variables, we sum the square of the margin of error across all the variables, and then take the square root. For this analysis, we look at all the counties which belong to the Altanta Regional Commission.</p>
<div id="looking-at-number-of-households" class="section level3" number="2.1.1">
<h3 number="2.1.1"><span class="header-section-number">2.1.1</span> Looking at number of households</h3>
<p>From the plots below, we can see that the majority of the shift in the income distribution has been a large increase in the number of households earning between $150,000 and $199,999 and more than $200,000 (by almost 100,000 from 2009 to 2019 in both groups), with a similar drop of almost 100,000 households earning less than $50,000.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df_income_dist_summary <span class="ot">&lt;-</span> df_income_distribution <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, county, variable, estimate, moe) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, variable) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">estimate =</span> <span class="fu">sum</span>(estimate),</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">moe =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(moe<span class="sc">**</span><span class="dv">2</span>))</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, <span class="at">ordered =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">levels =</span> income_var_labels)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>df_income_dist_summary</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["year"],"name":[1],"type":["chr"],"align":["left"]},{"label":["variable"],"name":[2],"type":["ord"],"align":["right"]},{"label":["estimate"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["moe"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2009","2":"Less than $50,000","3":"673468","4":"14025.250"},{"1":"2009","2":"$100,000 to $149,999","3":"207098","4":"6808.504"},{"1":"2009","2":"$150,000 to $199,999","3":"85074","4":"4070.461"},{"1":"2009","2":"$200,000 or more","3":"89176","4":"4254.388"},{"1":"2009","2":"$50,000 to $74,999","3":"287481","4":"8685.583"},{"1":"2009","2":"$75,000 to $99,999","3":"198065","4":"7213.441"},{"1":"2010","2":"Less than $50,000","3":"703538","4":"14546.354"},{"1":"2010","2":"$100,000 to $149,999","3":"204312","4":"7029.692"},{"1":"2010","2":"$150,000 to $199,999","3":"83789","4":"4514.491"},{"1":"2010","2":"$200,000 or more","3":"77920","4":"4058.017"},{"1":"2010","2":"$50,000 to $74,999","3":"278198","4":"8863.102"},{"1":"2010","2":"$75,000 to $99,999","3":"187849","4":"6946.422"},{"1":"2011","2":"Less than $50,000","3":"718204","4":"17449.293"},{"1":"2011","2":"$100,000 to $149,999","3":"207985","4":"9051.973"},{"1":"2011","2":"$150,000 to $199,999","3":"83240","4":"5476.942"},{"1":"2011","2":"$200,000 or more","3":"82890","4":"5147.920"},{"1":"2011","2":"$50,000 to $74,999","3":"283003","4":"11073.901"},{"1":"2011","2":"$75,000 to $99,999","3":"176564","4":"8273.301"},{"1":"2012","2":"Less than $50,000","3":"701785","4":"14777.945"},{"1":"2012","2":"$100,000 to $149,999","3":"209570","4":"7366.357"},{"1":"2012","2":"$150,000 to $199,999","3":"91960","4":"5107.334"},{"1":"2012","2":"$200,000 or more","3":"98480","4":"4784.550"},{"1":"2012","2":"$50,000 to $74,999","3":"283649","4":"9106.299"},{"1":"2012","2":"$75,000 to $99,999","3":"187558","4":"7006.069"},{"1":"2013","2":"Less than $50,000","3":"703869","4":"15418.799"},{"1":"2013","2":"$100,000 to $149,999","3":"217490","4":"7812.613"},{"1":"2013","2":"$150,000 to $199,999","3":"91631","4":"4931.876"},{"1":"2013","2":"$200,000 or more","3":"98212","4":"4210.534"},{"1":"2013","2":"$50,000 to $74,999","3":"289727","4":"9871.371"},{"1":"2013","2":"$75,000 to $99,999","3":"197658","4":"7291.694"},{"1":"2014","2":"Less than $50,000","3":"697773","4":"14798.787"},{"1":"2014","2":"$100,000 to $149,999","3":"221624","4":"7817.005"},{"1":"2014","2":"$150,000 to $199,999","3":"98381","4":"4887.738"},{"1":"2014","2":"$200,000 or more","3":"111523","4":"4658.740"},{"1":"2014","2":"$50,000 to $74,999","3":"291831","4":"9284.900"},{"1":"2014","2":"$75,000 to $99,999","3":"199324","4":"7347.277"},{"1":"2015","2":"Less than $50,000","3":"674092","4":"14708.783"},{"1":"2015","2":"$100,000 to $149,999","3":"250296","4":"8064.799"},{"1":"2015","2":"$150,000 to $199,999","3":"105468","4":"5113.119"},{"1":"2015","2":"$200,000 or more","3":"118718","4":"4741.615"},{"1":"2015","2":"$50,000 to $74,999","3":"309528","4":"9838.684"},{"1":"2015","2":"$75,000 to $99,999","3":"204604","4":"7253.191"},{"1":"2016","2":"Less than $50,000","3":"647291","4":"14964.550"},{"1":"2016","2":"$100,000 to $149,999","3":"257365","4":"8733.585"},{"1":"2016","2":"$150,000 to $199,999","3":"114479","4":"5457.340"},{"1":"2016","2":"$200,000 or more","3":"138809","4":"5909.258"},{"1":"2016","2":"$50,000 to $74,999","3":"310382","4":"10329.788"},{"1":"2016","2":"$75,000 to $99,999","3":"222011","4":"8383.107"},{"1":"2017","2":"Less than $50,000","3":"629525","4":"15228.511"},{"1":"2017","2":"$100,000 to $149,999","3":"269936","4":"8945.849"},{"1":"2017","2":"$150,000 to $199,999","3":"126198","4":"5161.806"},{"1":"2017","2":"$200,000 or more","3":"152678","4":"5427.832"},{"1":"2017","2":"$50,000 to $74,999","3":"313603","4":"10841.964"},{"1":"2017","2":"$75,000 to $99,999","3":"226478","4":"8306.074"},{"1":"2018","2":"Less than $50,000","3":"603490","4":"14995.813"},{"1":"2018","2":"$100,000 to $149,999","3":"292044","4":"9458.636"},{"1":"2018","2":"$150,000 to $199,999","3":"137541","4":"6393.134"},{"1":"2018","2":"$200,000 or more","3":"179819","4":"6336.581"},{"1":"2018","2":"$50,000 to $74,999","3":"308483","4":"10033.219"},{"1":"2018","2":"$75,000 to $99,999","3":"227432","4":"8923.171"},{"1":"2019","2":"Less than $50,000","3":"592291","4":"16401.439"},{"1":"2019","2":"$100,000 to $149,999","3":"301530","4":"10769.570"},{"1":"2019","2":"$150,000 to $199,999","3":"152714","4":"7095.334"},{"1":"2019","2":"$200,000 or more","3":"199469","4":"7109.457"},{"1":"2019","2":"$50,000 to $74,999","3":"315110","4":"11775.810"},{"1":"2019","2":"$75,000 to $99,999","3":"231446","4":"9371.211"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    df_income_dist_summary,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;data-files/income_distribution_by_year.csv&quot;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(scales)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_income_dist_summary, <span class="fu">aes</span>(<span class="at">x =</span> variable, <span class="at">y =</span> estimate)) <span class="sc">+</span> </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> year) <span class="sc">+</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> estimate <span class="sc">-</span> moe, <span class="at">ymax =</span> estimate <span class="sc">+</span> moe)) <span class="sc">+</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Income band&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of households&quot;</span>,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Distribution of Household Income in the Atlanta area Between 2009 and 2019&quot;</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-11-1.png" width="960" /></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df_income_dist_summary <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.Date</span>(<span class="fu">paste</span>(year, <span class="dv">1</span>, <span class="dv">1</span>, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> year, <span class="at">y =</span> estimate, <span class="at">col =</span> variable, <span class="at">fill =</span> variable,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">ymin =</span> estimate <span class="sc">-</span> moe, <span class="at">ymax =</span> estimate <span class="sc">+</span> moe)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_ribbon</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of households&quot;</span>,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">&quot;Income band&quot;</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-12-1.png" width="960" /></p>
</div>
<div id="looking-at-the-proportion-of-households" class="section level3" number="2.1.2">
<h3 number="2.1.2"><span class="header-section-number">2.1.2</span> Looking at the proportion of households</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df_income_prop_summary <span class="ot">&lt;-</span> df_income_distribution <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, county, variable, estimate, moe) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, variable) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">estimate =</span> <span class="fu">sum</span>(estimate),</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">moe =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(moe<span class="sc">**</span><span class="dv">2</span>))</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> income_var_labels)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">moe =</span> moe <span class="sc">/</span> <span class="fu">sum</span>(estimate),</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">estimate =</span> estimate <span class="sc">/</span> <span class="fu">sum</span>(estimate),</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>df_income_prop_summary</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["year"],"name":[1],"type":["chr"],"align":["left"]},{"label":["variable"],"name":[2],"type":["ord"],"align":["right"]},{"label":["estimate"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["moe"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2009","2":"Less than $50,000","3":"0.43721411","4":"0.009105165"},{"1":"2009","2":"$100,000 to $149,999","3":"0.13444762","4":"0.004420067"},{"1":"2009","2":"$150,000 to $199,999","3":"0.05522987","4":"0.002642535"},{"1":"2009","2":"$200,000 or more","3":"0.05789288","4":"0.002761940"},{"1":"2009","2":"$50,000 to $74,999","3":"0.18663210","4":"0.005638664"},{"1":"2009","2":"$75,000 to $99,999","3":"0.12858341","4":"0.004682952"},{"1":"2010","2":"Less than $50,000","3":"0.45815007","4":"0.009472712"},{"1":"2010","2":"$100,000 to $149,999","3":"0.13304975","4":"0.004577797"},{"1":"2010","2":"$150,000 to $199,999","3":"0.05456413","4":"0.002939876"},{"1":"2010","2":"$200,000 or more","3":"0.05074218","4":"0.002642616"},{"1":"2010","2":"$50,000 to $74,999","3":"0.18116496","4":"0.005771729"},{"1":"2010","2":"$75,000 to $99,999","3":"0.12232890","4":"0.004523570"},{"1":"2011","2":"Less than $50,000","3":"0.46279430","4":"0.011243927"},{"1":"2011","2":"$100,000 to $149,999","3":"0.13402080","4":"0.005832885"},{"1":"2011","2":"$150,000 to $199,999","3":"0.05363796","4":"0.003529217"},{"1":"2011","2":"$200,000 or more","3":"0.05341243","4":"0.003317203"},{"1":"2011","2":"$50,000 to $74,999","3":"0.18236069","4":"0.007135770"},{"1":"2011","2":"$75,000 to $99,999","3":"0.11377382","4":"0.005331127"},{"1":"2012","2":"Less than $50,000","3":"0.44614374","4":"0.009394740"},{"1":"2012","2":"$100,000 to $149,999","3":"0.13322933","4":"0.004682993"},{"1":"2012","2":"$150,000 to $199,999","3":"0.05846146","4":"0.003246871"},{"1":"2012","2":"$200,000 or more","3":"0.06260640","4":"0.003041668"},{"1":"2012","2":"$50,000 to $74,999","3":"0.18032336","4":"0.005789121"},{"1":"2012","2":"$75,000 to $99,999","3":"0.11923570","4":"0.004453948"},{"1":"2013","2":"Less than $50,000","3":"0.44030697","4":"0.009645268"},{"1":"2013","2":"$100,000 to $149,999","3":"0.13605140","4":"0.004887199"},{"1":"2013","2":"$150,000 to $199,999","3":"0.05732000","4":"0.003085147"},{"1":"2013","2":"$200,000 or more","3":"0.06143676","4":"0.002633910"},{"1":"2013","2":"$50,000 to $74,999","3":"0.18123943","4":"0.006175060"},{"1":"2013","2":"$75,000 to $99,999","3":"0.12364544","4":"0.004561337"},{"1":"2014","2":"Less than $50,000","3":"0.43060287","4":"0.009132483"},{"1":"2014","2":"$100,000 to $149,999","3":"0.13676644","4":"0.004823954"},{"1":"2014","2":"$150,000 to $199,999","3":"0.06071192","4":"0.003016273"},{"1":"2014","2":"$200,000 or more","3":"0.06882199","4":"0.002874956"},{"1":"2014","2":"$50,000 to $74,999","3":"0.18009190","4":"0.005729807"},{"1":"2014","2":"$75,000 to $99,999","3":"0.12300488","4":"0.004534080"},{"1":"2015","2":"Less than $50,000","3":"0.40541864","4":"0.008846292"},{"1":"2015","2":"$100,000 to $149,999","3":"0.15053533","4":"0.004850406"},{"1":"2015","2":"$150,000 to $199,999","3":"0.06343154","4":"0.003075179"},{"1":"2015","2":"$200,000 or more","3":"0.07140048","4":"0.002851746"},{"1":"2015","2":"$50,000 to $74,999","3":"0.18615919","4":"0.005917272"},{"1":"2015","2":"$75,000 to $99,999","3":"0.12305483","4":"0.004362281"},{"1":"2016","2":"Less than $50,000","3":"0.38293607","4":"0.008852998"},{"1":"2016","2":"$100,000 to $149,999","3":"0.15225662","4":"0.005166771"},{"1":"2016","2":"$150,000 to $199,999","3":"0.06772555","4":"0.003228552"},{"1":"2016","2":"$200,000 or more","3":"0.08211913","4":"0.003495905"},{"1":"2016","2":"$50,000 to $74,999","3":"0.18362137","4":"0.006111082"},{"1":"2016","2":"$75,000 to $99,999","3":"0.13134127","4":"0.004959429"},{"1":"2017","2":"Less than $50,000","3":"0.36633985","4":"0.008861937"},{"1":"2017","2":"$100,000 to $149,999","3":"0.15708402","4":"0.005205863"},{"1":"2017","2":"$150,000 to $199,999","3":"0.07343848","4":"0.003003813"},{"1":"2017","2":"$200,000 or more","3":"0.08884800","4":"0.003158621"},{"1":"2017","2":"$50,000 to $74,999","3":"0.18249518","4":"0.006309270"},{"1":"2017","2":"$75,000 to $99,999","3":"0.13179448","4":"0.004833559"},{"1":"2018","2":"Less than $50,000","3":"0.34508628","4":"0.008574872"},{"1":"2018","2":"$100,000 to $149,999","3":"0.16699594","4":"0.005408616"},{"1":"2018","2":"$150,000 to $199,999","3":"0.07864838","4":"0.003655707"},{"1":"2018","2":"$200,000 or more","3":"0.10282369","4":"0.003623369"},{"1":"2018","2":"$50,000 to $74,999","3":"0.17639605","4":"0.005737173"},{"1":"2018","2":"$75,000 to $99,999","3":"0.13004965","4":"0.005102427"},{"1":"2019","2":"Less than $50,000","3":"0.33041628","4":"0.009149729"},{"1":"2019","2":"$100,000 to $149,999","3":"0.16821194","4":"0.006007927"},{"1":"2019","2":"$150,000 to $199,999","3":"0.08519324","4":"0.003958213"},{"1":"2019","2":"$200,000 or more","3":"0.11127605","4":"0.003966092"},{"1":"2019","2":"$50,000 to $74,999","3":"0.17578770","4":"0.006569270"},{"1":"2019","2":"$75,000 to $99,999","3":"0.12911479","4":"0.005227837"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_income_prop_summary, <span class="fu">aes</span>(<span class="at">x =</span> variable, <span class="at">y =</span> estimate)) <span class="sc">+</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> year) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> estimate <span class="sc">-</span> moe, <span class="at">ymax =</span> estimate <span class="sc">+</span> moe)) <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Income band&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Proportion of households&quot;</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Distribution of Household Income in the Atlanta area Between 2009 and 2019&quot;</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-13-1.png" width="960" /></p>
</div>
<div id="overall-change-between-2009-and-2019" class="section level3" number="2.1.3">
<h3 number="2.1.3"><span class="header-section-number">2.1.3</span> Overall change between 2009 and 2019</h3>
<p>Here we focus particularly on the change between the years in 2009 and 2019.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>cbPalette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>, <span class="st">&quot;#009E73&quot;</span>, <span class="st">&quot;#F0E442&quot;</span>, <span class="st">&quot;#0072B2&quot;</span>, <span class="st">&quot;#D55E00&quot;</span>, <span class="st">&quot;#CC79A7&quot;</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>df_income_dist_summary <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2009</span>, <span class="dv">2019</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">factor</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> variable, <span class="at">y =</span> estimate, <span class="at">fill =</span> year)) <span class="sc">+</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">ymin =</span> estimate <span class="sc">-</span> moe, <span class="at">ymax =</span> estimate <span class="sc">+</span> moe), </span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cbPalette) <span class="sc">+</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">label =</span> year, <span class="at">y =</span> <span class="dv">10000</span>), </span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="dv">1</span>),</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">5</span>, <span class="at">hjust =</span> <span class="st">&#39;left&#39;</span>,</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Number of households&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Income band&quot;</span>,</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Distribution of Household Income in the Atlanta area (2009 and 2019)&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;Data from the 1-year ACS from 2009 and 2019&quot;</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-14-1.png" width="960" /></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/income_distribution_by_year.pdf&quot;</span>)</span></code></pre></div>
</div>
<div id="looking-at-the-changes-in-each-county" class="section level3" number="2.1.4">
<h3 number="2.1.4"><span class="header-section-number">2.1.4</span> Looking at the changes in each county</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>df_income_distribution <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, county, variable, estimate, moe) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> income_var_labels)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> estimate, <span class="at">fill =</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>(variable))) <span class="sc">+</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> county, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of Households&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Income Band&quot;</span>,</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Distribution of Household Income across Counties and Year&quot;</span>,</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;Data from the 1-year ACS from 2009 to 2019&quot;</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-15-1.png" width="960" /></p>
</div>
</div>
<div id="how-has-the-income-distribution-changed-itp-and-otp-from-2009-to-2019" class="section level2" number="2.2">
<h2 number="2.2"><span class="header-section-number">2.2</span> How has the income distribution changed ITP and OTP from 2009 to 2019?</h2>
<p>From the plot below, we can see that the number of households inside of the perimeter earning less than $50,000 has decreased by approximately 25000, whereas that outside the perimeter has stayed roughly constant.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>df_income_tracts <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2009</span>, <span class="dv">2019</span>),</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> income_var_list,</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">tract =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME),</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?), (.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">2&quot;</span>, NAME)</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(tract, county, <span class="at">.after =</span> GEOID)</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>df_tracts <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2009</span>, <span class="dv">2019</span>),</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>,</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> <span class="st">&quot;B19001_001&quot;</span>,</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">TRUE</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, geometry) <span class="sc">%&gt;%</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">tp =</span> <span class="fu">st_intersects</span>(</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>            <span class="fu">st_transform</span>(<span class="fu">st_boundary</span>(itp), <span class="at">crs =</span> <span class="dv">4269</span>),</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>            geometry, <span class="at">sparse =</span> <span class="cn">FALSE</span></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>        )[<span class="dv">1</span>, ],</span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">itp =</span> <span class="fu">st_within</span>(</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>            geometry,</span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>            <span class="fu">st_transform</span>(itp, <span class="at">crs =</span> <span class="dv">4269</span>), <span class="at">sparse =</span> <span class="cn">FALSE</span></span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>        )[, <span class="dv">1</span>],</span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">itp =</span> tp <span class="sc">|</span> itp,</span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">otp =</span> <span class="sc">!</span>itp</span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>tp) <span class="sc">%&gt;%</span></span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">cols =</span> <span class="fu">c</span>(itp, otp),</span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_to =</span> <span class="st">&quot;class&quot;</span>,</span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_to =</span> <span class="st">&quot;in_class&quot;</span></span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(in_class <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>in_class)</span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a>df_tracts_nogeom <span class="ot">&lt;-</span> df_tracts <span class="sc">%&gt;%</span> <span class="fu">st_drop_geometry</span>()</span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a>df_income_by_perimeter <span class="ot">&lt;-</span> df_income_tracts <span class="sc">%&gt;%</span></span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-57"><a href="#cb27-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(df_tracts_nogeom) <span class="sc">%&gt;%</span></span>
<span id="cb27-58"><a href="#cb27-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, class, variable, estimate, moe) <span class="sc">%&gt;%</span></span>
<span id="cb27-59"><a href="#cb27-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">fct_collapse</span>(variable, </span>
<span id="cb27-60"><a href="#cb27-60" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Less than $50,000&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb27-61"><a href="#cb27-61" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;Less than $10,000&quot;</span>, <span class="st">&quot;$10,000 to $14,999&quot;</span>, </span>
<span id="cb27-62"><a href="#cb27-62" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$15,000 to $19,999&quot;</span>, <span class="st">&quot;$20,000 to $24,999&quot;</span>,</span>
<span id="cb27-63"><a href="#cb27-63" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$25,000 to $29,999&quot;</span>, <span class="st">&quot;$30,000 to $34,999&quot;</span>,</span>
<span id="cb27-64"><a href="#cb27-64" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$35,000 to $39,999&quot;</span>, <span class="st">&quot;$40,000 to $44,999&quot;</span>,</span>
<span id="cb27-65"><a href="#cb27-65" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$45,000 to $49,999&quot;</span></span>
<span id="cb27-66"><a href="#cb27-66" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb27-67"><a href="#cb27-67" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$50,000 to $74,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$50,000 to $59,999&quot;</span>, <span class="st">&quot;$60,000 to $74,999&quot;</span>),</span>
<span id="cb27-68"><a href="#cb27-68" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$75,000 to $99,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$75,000 to $99,999&quot;</span>),</span>
<span id="cb27-69"><a href="#cb27-69" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$100,000 to $149,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb27-70"><a href="#cb27-70" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$100,000 to $124,999&quot;</span>, <span class="st">&quot;$125,000 to $149,999&quot;</span></span>
<span id="cb27-71"><a href="#cb27-71" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb27-72"><a href="#cb27-72" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$150,000 to $199,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$150,000 to $199,999&quot;</span>),</span>
<span id="cb27-73"><a href="#cb27-73" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$200,000 or more&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$200,000 or more&quot;</span>)</span>
<span id="cb27-74"><a href="#cb27-74" aria-hidden="true" tabindex="-1"></a>        )) <span class="sc">%&gt;%</span></span>
<span id="cb27-75"><a href="#cb27-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, class, variable) <span class="sc">%&gt;%</span></span>
<span id="cb27-76"><a href="#cb27-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb27-77"><a href="#cb27-77" aria-hidden="true" tabindex="-1"></a>        <span class="at">estimate =</span> <span class="fu">sum</span>(estimate),</span>
<span id="cb27-78"><a href="#cb27-78" aria-hidden="true" tabindex="-1"></a>        <span class="at">moe =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(moe<span class="sc">**</span><span class="dv">2</span>))</span>
<span id="cb27-79"><a href="#cb27-79" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb27-80"><a href="#cb27-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb27-81"><a href="#cb27-81" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, </span>
<span id="cb27-82"><a href="#cb27-82" aria-hidden="true" tabindex="-1"></a>            <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> income_var_labels</span>
<span id="cb27-83"><a href="#cb27-83" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb27-84"><a href="#cb27-84" aria-hidden="true" tabindex="-1"></a>        <span class="at">class =</span> <span class="fu">recode_factor</span>(<span class="fu">factor</span>(class), </span>
<span id="cb27-85"><a href="#cb27-85" aria-hidden="true" tabindex="-1"></a>            <span class="at">itp =</span> <span class="st">&quot;Inside the perimeter&quot;</span>, <span class="at">otp =</span> <span class="st">&quot;Outside the perimeter&quot;</span></span>
<span id="cb27-86"><a href="#cb27-86" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb27-87"><a href="#cb27-87" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-88"><a href="#cb27-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-89"><a href="#cb27-89" aria-hidden="true" tabindex="-1"></a>df_income_by_perimeter</span>
<span id="cb27-90"><a href="#cb27-90" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb27-91"><a href="#cb27-91" aria-hidden="true" tabindex="-1"></a>    df_income_by_perimeter,</span>
<span id="cb27-92"><a href="#cb27-92" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;data-files/income_distribution_inside_outside_perimeter.csv&quot;</span></span>
<span id="cb27-93"><a href="#cb27-93" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-94"><a href="#cb27-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-95"><a href="#cb27-95" aria-hidden="true" tabindex="-1"></a>df_income_by_perimeter <span class="sc">%&gt;%</span></span>
<span id="cb27-96"><a href="#cb27-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> variable, <span class="at">y =</span> estimate, <span class="at">fill =</span> year)) <span class="sc">+</span></span>
<span id="cb27-97"><a href="#cb27-97" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span> </span>
<span id="cb27-98"><a href="#cb27-98" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(</span>
<span id="cb27-99"><a href="#cb27-99" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">ymin =</span> estimate <span class="sc">-</span> moe, <span class="at">ymax =</span> estimate <span class="sc">+</span> moe),</span>
<span id="cb27-100"><a href="#cb27-100" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span></span>
<span id="cb27-101"><a href="#cb27-101" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cbPalette) <span class="sc">+</span></span>
<span id="cb27-102"><a href="#cb27-102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb27-103"><a href="#cb27-103" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">label =</span> year, <span class="at">y =</span> <span class="dv">10000</span>), </span>
<span id="cb27-104"><a href="#cb27-104" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="dv">1</span>),</span>
<span id="cb27-105"><a href="#cb27-105" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">5</span>, <span class="at">hjust =</span> <span class="st">&#39;left&#39;</span>,</span>
<span id="cb27-106"><a href="#cb27-106" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">&quot;#000000&quot;</span></span>
<span id="cb27-107"><a href="#cb27-107" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb27-108"><a href="#cb27-108" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="sc">~</span> class, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb27-109"><a href="#cb27-109" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb27-110"><a href="#cb27-110" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Income band&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of households&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb27-111"><a href="#cb27-111" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Distribution of household income in the Atlanta inside and outside the perimeter&quot;</span>,</span>
<span id="cb27-112"><a href="#cb27-112" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;Data from the 1-year ACS from 2009 and 2019&quot;</span></span>
<span id="cb27-113"><a href="#cb27-113" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb27-114"><a href="#cb27-114" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb27-115"><a href="#cb27-115" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-16-1.png" width="960" /></p>
</div>
<div id="how-has-the-income-distribution-changed-across-census-tracts-over-time" class="section level2" number="2.3">
<h2 number="2.3"><span class="header-section-number">2.3</span> How has the income distribution changed across census tracts over time?</h2>
<p>To compare the income distribution across tracts over time, for each census tract, we will look at the proportion of the population in the different income bands, and then compare these between 2010 and 2019. (These time periods were chosen so that there are no issues in switching between different census tracts.) To do so, we will compute the total variation distance between the two distributions; formally, if we have <span class="math inline">\(K\)</span> different possible values, and we have two sets of proportions labelled <span class="math inline">\(p(i)\)</span> and <span class="math inline">\(q(i)\)</span> (where <span class="math inline">\(i\)</span> can take on <span class="math inline">\(1\)</span>, <span class="math inline">\(2\)</span>, …, or <span class="math inline">\(K\)</span>), then we compute the value <span class="math display">\[ \frac{1}{2} \times \Big( |p(1) - q(1)| + |p(2) - q(2)| + \cdots + |p(K) - q(K)| \Big), \]</span> and use this as a measure of how different <span class="math inline">\(p\)</span> and <span class="math inline">\(q\)</span> are. If this distance is zero, then the two distributions are identical; the closer the distance is to one, the greater the difference between the distributions. To try and observe what is happening in relation to some other geographical structures, the major highways beyond that of the interstate have also been added to the plots below as dashed black lines (with the county boundaries given as solid black lines, and the census tract boundaries as solid grey lines).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>df_income_tracts <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2010</span>, <span class="dv">2019</span>),</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> income_var_list,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">tract =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME),</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?), (.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">2&quot;</span>, NAME)</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(tract, county, <span class="at">.after =</span> GEOID)</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>df_tracts <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2010</span>),</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>,</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> <span class="st">&quot;B19001_001&quot;</span>,</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">TRUE</span></span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(GEOID, geometry) <span class="sc">%&gt;%</span></span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">tp =</span> <span class="fu">st_intersects</span>(</span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>            <span class="fu">st_transform</span>(<span class="fu">st_boundary</span>(itp), <span class="at">crs =</span> <span class="dv">4269</span>),</span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>            geometry, <span class="at">sparse =</span> <span class="cn">FALSE</span></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>        )[<span class="dv">1</span>, ],</span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">itp =</span> <span class="fu">st_within</span>(</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>            geometry,</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>            <span class="fu">st_transform</span>(itp, <span class="at">crs =</span> <span class="dv">4269</span>), <span class="at">sparse =</span> <span class="cn">FALSE</span></span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>        )[, <span class="dv">1</span>],</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">itp =</span> tp <span class="sc">|</span> itp,</span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">otp =</span> <span class="sc">!</span>itp</span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>tp) <span class="sc">%&gt;%</span></span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">cols =</span> <span class="fu">c</span>(itp, otp),</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_to =</span> <span class="st">&quot;class&quot;</span>,</span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_to =</span> <span class="st">&quot;in_class&quot;</span></span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(in_class <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>in_class)</span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a>df_total_households_tracts <span class="ot">&lt;-</span> df_income_tracts <span class="sc">%&gt;%</span></span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">==</span> <span class="st">&#39;Total&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, estimate, moe)</span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a>df_total_households_tracts2 <span class="ot">&lt;-</span> df_total_households_tracts <span class="sc">%&gt;%</span> </span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="st">&#39;2019&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(GEOID, estimate)</span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a>df_income_change_long <span class="ot">&lt;-</span> df_income_tracts <span class="sc">%&gt;%</span></span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, variable, estimate) <span class="sc">%&gt;%</span></span>
<span id="cb28-63"><a href="#cb28-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">fct_collapse</span>(variable, </span>
<span id="cb28-64"><a href="#cb28-64" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Less than $50,000&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb28-65"><a href="#cb28-65" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;Less than $10,000&quot;</span>, <span class="st">&quot;$10,000 to $14,999&quot;</span>, </span>
<span id="cb28-66"><a href="#cb28-66" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$15,000 to $19,999&quot;</span>, <span class="st">&quot;$20,000 to $24,999&quot;</span>,</span>
<span id="cb28-67"><a href="#cb28-67" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$25,000 to $29,999&quot;</span>, <span class="st">&quot;$30,000 to $34,999&quot;</span>,</span>
<span id="cb28-68"><a href="#cb28-68" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$35,000 to $39,999&quot;</span>, <span class="st">&quot;$40,000 to $44,999&quot;</span>,</span>
<span id="cb28-69"><a href="#cb28-69" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$45,000 to $49,999&quot;</span></span>
<span id="cb28-70"><a href="#cb28-70" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb28-71"><a href="#cb28-71" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$50,000 to $74,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$50,000 to $59,999&quot;</span>, <span class="st">&quot;$60,000 to $74,999&quot;</span>),</span>
<span id="cb28-72"><a href="#cb28-72" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$75,000 to $99,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$75,000 to $99,999&quot;</span>),</span>
<span id="cb28-73"><a href="#cb28-73" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$100,000 to $149,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb28-74"><a href="#cb28-74" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$100,000 to $124,999&quot;</span>, <span class="st">&quot;$125,000 to $149,999&quot;</span></span>
<span id="cb28-75"><a href="#cb28-75" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb28-76"><a href="#cb28-76" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$150,000 to $199,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$150,000 to $199,999&quot;</span>),</span>
<span id="cb28-77"><a href="#cb28-77" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$200,000 or more&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$200,000 or more&quot;</span>)</span>
<span id="cb28-78"><a href="#cb28-78" aria-hidden="true" tabindex="-1"></a>        )) <span class="sc">%&gt;%</span></span>
<span id="cb28-79"><a href="#cb28-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, GEOID, variable) <span class="sc">%&gt;%</span></span>
<span id="cb28-80"><a href="#cb28-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">estimate =</span> <span class="fu">sum</span>(estimate)) <span class="sc">%&gt;%</span></span>
<span id="cb28-81"><a href="#cb28-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-82"><a href="#cb28-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb28-83"><a href="#cb28-83" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> income_var_labels)</span>
<span id="cb28-84"><a href="#cb28-84" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-85"><a href="#cb28-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-86"><a href="#cb28-86" aria-hidden="true" tabindex="-1"></a>df_income_change_tracts <span class="ot">&lt;-</span> df_income_change_long <span class="sc">%&gt;%</span></span>
<span id="cb28-87"><a href="#cb28-87" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb28-88"><a href="#cb28-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">estimate =</span> estimate <span class="sc">/</span> <span class="fu">sum</span>(estimate)) <span class="sc">%&gt;%</span></span>
<span id="cb28-89"><a href="#cb28-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb28-90"><a href="#cb28-90" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year,</span>
<span id="cb28-91"><a href="#cb28-91" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;estimate_&quot;</span>,</span>
<span id="cb28-92"><a href="#cb28-92" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> estimate</span>
<span id="cb28-93"><a href="#cb28-93" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb28-94"><a href="#cb28-94" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb28-95"><a href="#cb28-95" aria-hidden="true" tabindex="-1"></a>        <span class="at">diff =</span> <span class="fu">abs</span>(estimate_2019 <span class="sc">-</span> estimate_2010)</span>
<span id="cb28-96"><a href="#cb28-96" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb28-97"><a href="#cb28-97" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb28-98"><a href="#cb28-98" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">income_dist_change =</span> <span class="fl">0.5</span><span class="sc">*</span><span class="fu">sum</span>(diff)) <span class="sc">%&gt;%</span></span>
<span id="cb28-99"><a href="#cb28-99" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(df_tracts)</span>
<span id="cb28-100"><a href="#cb28-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-101"><a href="#cb28-101" aria-hidden="true" tabindex="-1"></a>df_income_change_overall <span class="ot">&lt;-</span> df_income_change_long <span class="sc">%&gt;%</span></span>
<span id="cb28-102"><a href="#cb28-102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb28-103"><a href="#cb28-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">estimate =</span> estimate <span class="sc">/</span> <span class="fu">sum</span>(estimate)) <span class="sc">%&gt;%</span></span>
<span id="cb28-104"><a href="#cb28-104" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb28-105"><a href="#cb28-105" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year,</span>
<span id="cb28-106"><a href="#cb28-106" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;estimate_&quot;</span>,</span>
<span id="cb28-107"><a href="#cb28-107" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> estimate</span>
<span id="cb28-108"><a href="#cb28-108" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb28-109"><a href="#cb28-109" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb28-110"><a href="#cb28-110" aria-hidden="true" tabindex="-1"></a>        <span class="at">diff =</span> <span class="fu">abs</span>(estimate_2010 <span class="sc">-</span> estimate_2019)</span>
<span id="cb28-111"><a href="#cb28-111" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb28-112"><a href="#cb28-112" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">income_dist_change =</span> <span class="fl">0.5</span> <span class="sc">*</span> <span class="fu">sum</span>(diff))</span>
<span id="cb28-113"><a href="#cb28-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-114"><a href="#cb28-114" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb28-115"><a href="#cb28-115" aria-hidden="true" tabindex="-1"></a>    df_total_households_tracts2<span class="sc">$</span>estimate, df_income_change_tracts<span class="sc">$</span>income_dist_change,</span>
<span id="cb28-116"><a href="#cb28-116" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> <span class="fu">factor</span>(df_tracts<span class="sc">$</span>class),</span>
<span id="cb28-117"><a href="#cb28-117" aria-hidden="true" tabindex="-1"></a>    <span class="at">xlab =</span> <span class="st">&quot;Number of households in census tract in 2019&quot;</span>,</span>
<span id="cb28-118"><a href="#cb28-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">ylab =</span> <span class="st">&quot;Total variation of income distribution change in census tract&quot;</span>,</span>
<span id="cb28-119"><a href="#cb28-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">main =</span> <span class="st">&quot;Number of households vs income change across census tracts&quot;</span>,</span>
<span id="cb28-120"><a href="#cb28-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">sub =</span> <span class="st">&quot;(Horizontal red line corresponds to level of income change across all Atlanta)&quot;</span></span>
<span id="cb28-121"><a href="#cb28-121" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb28-122"><a href="#cb28-122" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">as.numeric</span>(df_income_change_overall), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-17-1.png" width="960" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>df_income_change_tracts <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">class =</span> <span class="fu">recode_factor</span>(<span class="fu">factor</span>(class), </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">itp =</span> <span class="st">&quot;Inside the perimeter&quot;</span>, <span class="at">otp =</span> <span class="st">&quot;Outside the perimeter&quot;</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>geometry) <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> income_dist_change, <span class="fu">after_stat</span>(density))) <span class="sc">+</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>( <span class="sc">~</span> class) <span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">xintercept =</span> <span class="fu">as.numeric</span>(df_income_change_overall),</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">&quot;red&quot;</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Total variation distance between income distributions in 2010 and 2019&quot;</span>,</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Histogram of total variation distances between income distributions across census tracts&quot;</span>,  </span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Density of census tracts in class&quot;</span>, </span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Vertical red line represents the overall distribution change across Atlanta, vertical blue line represents this plus the IQR overall all&quot;</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-17-2.png" width="960" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_income_change_tracts <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">income_dist_change =</span> <span class="fu">pmin</span>(income_dist_change, <span class="fl">0.31</span>)), </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> income_dist_change),</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="st">&quot;0.3+&quot;</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;#000000&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Total variation of income distributions&quot;</span>,</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Change in income distribution by census tract&quot;</span>,</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data from the 5 year 2006-2010 and 2015-2019 ACS)&quot;</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-17-3.png" width="960" /></p>
<p>This seems pretty abstract, and so instead we’ll look at some “extreme groups”:</p>
<ul>
<li>households earning more than $200k,</li>
<li>households earning less than $50k;</li>
<li>households earning between $50k and $75k;</li>
</ul>
<p>and see where the numbers of these households/proportions have been increasing and decreasing in number the largest.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df_rdincome_tracts <span class="ot">&lt;-</span> df_income_tracts <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, variable, estimate) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">fct_collapse</span>(variable, </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Less than $50,000&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Less than $10,000&quot;</span>, <span class="st">&quot;$10,000 to $14,999&quot;</span>, </span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$15,000 to $19,999&quot;</span>, <span class="st">&quot;$20,000 to $24,999&quot;</span>,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$25,000 to $29,999&quot;</span>, <span class="st">&quot;$30,000 to $34,999&quot;</span>,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$35,000 to $39,999&quot;</span>, <span class="st">&quot;$40,000 to $44,999&quot;</span>,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$45,000 to $49,999&quot;</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$50,000 to $74,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$50,000 to $59,999&quot;</span>, <span class="st">&quot;$60,000 to $74,999&quot;</span>),</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$75,000 to $99,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$75,000 to $99,999&quot;</span>),</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$100,000 to $149,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$100,000 to $124,999&quot;</span>, <span class="st">&quot;$125,000 to $149,999&quot;</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$150,000 to $199,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$150,000 to $199,999&quot;</span>),</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$200,000 or more&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$200,000 or more&quot;</span>)</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> income_var_labels)</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, GEOID, variable) <span class="sc">%&gt;%</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">estimate =</span> <span class="fu">sum</span>(estimate)) <span class="sc">%&gt;%</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(df_tracts)</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>p2010 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_rdincome_tracts <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="st">&#39;2010&#39;</span>),</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> estimate),</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">trans =</span> <span class="st">&#39;sqrt&#39;</span>) <span class="sc">+</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable) <span class="sc">+</span> </span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;#f100e5&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span> </span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Number of households&quot;</span>,</span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Number of households by income band and tract&quot;</span>,</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using 5-year estimates from the 2006-2010 ACS)&quot;</span></span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>p2019 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_rdincome_tracts <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="st">&#39;2019&#39;</span>),</span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> estimate),</span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">trans =</span> <span class="st">&#39;log10&#39;</span>) <span class="sc">+</span></span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable) <span class="sc">+</span></span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;#f100e5&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Number of households&quot;</span>,</span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Number of households by income band and tract&quot;</span>,</span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using 5-year estimates from the 2015-2019 ACS)&quot;</span></span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb31-60"><a href="#cb31-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-61"><a href="#cb31-61" aria-hidden="true" tabindex="-1"></a>df_rdincome_change_tracts <span class="ot">&lt;-</span> df_income_tracts <span class="sc">%&gt;%</span></span>
<span id="cb31-62"><a href="#cb31-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-63"><a href="#cb31-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, variable, estimate) <span class="sc">%&gt;%</span></span>
<span id="cb31-64"><a href="#cb31-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">fct_collapse</span>(variable, </span>
<span id="cb31-65"><a href="#cb31-65" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Less than $50,000&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb31-66"><a href="#cb31-66" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Less than $10,000&quot;</span>, <span class="st">&quot;$10,000 to $14,999&quot;</span>, </span>
<span id="cb31-67"><a href="#cb31-67" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$15,000 to $19,999&quot;</span>, <span class="st">&quot;$20,000 to $24,999&quot;</span>,</span>
<span id="cb31-68"><a href="#cb31-68" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$25,000 to $29,999&quot;</span>, <span class="st">&quot;$30,000 to $34,999&quot;</span>,</span>
<span id="cb31-69"><a href="#cb31-69" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$35,000 to $39,999&quot;</span>, <span class="st">&quot;$40,000 to $44,999&quot;</span>,</span>
<span id="cb31-70"><a href="#cb31-70" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$45,000 to $49,999&quot;</span></span>
<span id="cb31-71"><a href="#cb31-71" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb31-72"><a href="#cb31-72" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$50,000 to $74,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$50,000 to $59,999&quot;</span>, <span class="st">&quot;$60,000 to $74,999&quot;</span>),</span>
<span id="cb31-73"><a href="#cb31-73" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$75,000 to $99,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$75,000 to $99,999&quot;</span>),</span>
<span id="cb31-74"><a href="#cb31-74" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$100,000 to $149,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb31-75"><a href="#cb31-75" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$100,000 to $124,999&quot;</span>, <span class="st">&quot;$125,000 to $149,999&quot;</span></span>
<span id="cb31-76"><a href="#cb31-76" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb31-77"><a href="#cb31-77" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$150,000 to $199,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$150,000 to $199,999&quot;</span>),</span>
<span id="cb31-78"><a href="#cb31-78" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$200,000 or more&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$200,000 or more&quot;</span>)</span>
<span id="cb31-79"><a href="#cb31-79" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb31-80"><a href="#cb31-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb31-81"><a href="#cb31-81" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> income_var_labels)</span>
<span id="cb31-82"><a href="#cb31-82" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb31-83"><a href="#cb31-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, GEOID, variable) <span class="sc">%&gt;%</span></span>
<span id="cb31-84"><a href="#cb31-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">estimate =</span> <span class="fu">sum</span>(estimate)) <span class="sc">%&gt;%</span></span>
<span id="cb31-85"><a href="#cb31-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb31-86"><a href="#cb31-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb31-87"><a href="#cb31-87" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;estimate_&quot;</span>,</span>
<span id="cb31-88"><a href="#cb31-88" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> <span class="st">&quot;estimate&quot;</span></span>
<span id="cb31-89"><a href="#cb31-89" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb31-90"><a href="#cb31-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">change =</span> estimate_2019 <span class="sc">-</span> estimate_2010) <span class="sc">%&gt;%</span></span>
<span id="cb31-91"><a href="#cb31-91" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(df_tracts)</span>
<span id="cb31-92"><a href="#cb31-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-93"><a href="#cb31-93" aria-hidden="true" tabindex="-1"></a>df_rdincome_change_tracts <span class="sc">%&gt;%</span></span>
<span id="cb31-94"><a href="#cb31-94" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> change)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb31-95"><a href="#cb31-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable) <span class="sc">+</span> </span>
<span id="cb31-96"><a href="#cb31-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb31-97"><a href="#cb31-97" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Change in number of households&quot;</span>, </span>
<span id="cb31-98"><a href="#cb31-98" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Number of census tracts&quot;</span>,</span>
<span id="cb31-99"><a href="#cb31-99" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Change in number of households in different income bands across census tracts&quot;</span>, </span>
<span id="cb31-100"><a href="#cb31-100" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data from the 5-year ACS 2006-2010 and 2015-2019)&quot;</span></span>
<span id="cb31-101"><a href="#cb31-101" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-18-1.png" width="960" /></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df_rdincome_prop_tracts <span class="ot">&lt;-</span> df_income_tracts <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, variable, estimate) <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">fct_collapse</span>(variable, </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Less than $50,000&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Less than $10,000&quot;</span>, <span class="st">&quot;$10,000 to $14,999&quot;</span>, </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$15,000 to $19,999&quot;</span>, <span class="st">&quot;$20,000 to $24,999&quot;</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$25,000 to $29,999&quot;</span>, <span class="st">&quot;$30,000 to $34,999&quot;</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$35,000 to $39,999&quot;</span>, <span class="st">&quot;$40,000 to $44,999&quot;</span>,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$45,000 to $49,999&quot;</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$50,000 to $74,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$50,000 to $59,999&quot;</span>, <span class="st">&quot;$60,000 to $74,999&quot;</span>),</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$75,000 to $99,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$75,000 to $99,999&quot;</span>),</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$100,000 to $149,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$100,000 to $124,999&quot;</span>, <span class="st">&quot;$125,000 to $149,999&quot;</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$150,000 to $199,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$150,000 to $199,999&quot;</span>),</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$200,000 or more&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$200,000 or more&quot;</span>)</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> income_var_labels)</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, GEOID, variable) <span class="sc">%&gt;%</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">estimate =</span> <span class="fu">sum</span>(estimate)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">estimate =</span> estimate <span class="sc">/</span> <span class="fu">sum</span>(estimate)) <span class="sc">%&gt;%</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(df_tracts)</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>pincome2010 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_rdincome_prop_tracts <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="st">&#39;2010&#39;</span>),</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> estimate),</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">trans =</span> <span class="st">&#39;sqrt&#39;</span>) <span class="sc">+</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable) <span class="sc">+</span> </span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;#f100e5&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span> </span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Proportion of households&quot;</span>,</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Proportion of households by income band in census tracts&quot;</span>,</span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using 5-year estimates from the 2006-2010 ACS)&quot;</span></span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>pincome2019 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_rdincome_prop_tracts <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="st">&#39;2019&#39;</span>),</span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> estimate),</span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">trans =</span> <span class="st">&#39;log10&#39;</span>) <span class="sc">+</span></span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable) <span class="sc">+</span></span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;#f100e5&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Proportion of households&quot;</span>,</span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Proportion of households by income band in census tracts&quot;</span>,</span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using 5-year estimates from the 2015-2019 ACS)&quot;</span></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a>df_rdincome_prop_change_tracts <span class="ot">&lt;-</span> df_income_tracts <span class="sc">%&gt;%</span></span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, variable, estimate) <span class="sc">%&gt;%</span></span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">fct_collapse</span>(variable, </span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Less than $50,000&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Less than $10,000&quot;</span>, <span class="st">&quot;$10,000 to $14,999&quot;</span>, </span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$15,000 to $19,999&quot;</span>, <span class="st">&quot;$20,000 to $24,999&quot;</span>,</span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$25,000 to $29,999&quot;</span>, <span class="st">&quot;$30,000 to $34,999&quot;</span>,</span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$35,000 to $39,999&quot;</span>, <span class="st">&quot;$40,000 to $44,999&quot;</span>,</span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$45,000 to $49,999&quot;</span></span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$50,000 to $74,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$50,000 to $59,999&quot;</span>, <span class="st">&quot;$60,000 to $74,999&quot;</span>),</span>
<span id="cb32-75"><a href="#cb32-75" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$75,000 to $99,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$75,000 to $99,999&quot;</span>),</span>
<span id="cb32-76"><a href="#cb32-76" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$100,000 to $149,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb32-77"><a href="#cb32-77" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$100,000 to $124,999&quot;</span>, <span class="st">&quot;$125,000 to $149,999&quot;</span></span>
<span id="cb32-78"><a href="#cb32-78" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb32-79"><a href="#cb32-79" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$150,000 to $199,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$150,000 to $199,999&quot;</span>),</span>
<span id="cb32-80"><a href="#cb32-80" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$200,000 or more&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$200,000 or more&quot;</span>)</span>
<span id="cb32-81"><a href="#cb32-81" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb32-82"><a href="#cb32-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb32-83"><a href="#cb32-83" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> income_var_labels)</span>
<span id="cb32-84"><a href="#cb32-84" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb32-85"><a href="#cb32-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, GEOID, variable) <span class="sc">%&gt;%</span></span>
<span id="cb32-86"><a href="#cb32-86" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">estimate =</span> <span class="fu">sum</span>(estimate)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-87"><a href="#cb32-87" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb32-88"><a href="#cb32-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">estimate =</span> estimate <span class="sc">/</span> <span class="fu">sum</span>(estimate)) <span class="sc">%&gt;%</span></span>
<span id="cb32-89"><a href="#cb32-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb32-90"><a href="#cb32-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb32-91"><a href="#cb32-91" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb32-92"><a href="#cb32-92" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;estimate_&quot;</span>,</span>
<span id="cb32-93"><a href="#cb32-93" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> <span class="st">&quot;estimate&quot;</span></span>
<span id="cb32-94"><a href="#cb32-94" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb32-95"><a href="#cb32-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">change =</span> estimate_2019 <span class="sc">-</span> estimate_2010) <span class="sc">%&gt;%</span></span>
<span id="cb32-96"><a href="#cb32-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(df_tracts)</span>
<span id="cb32-97"><a href="#cb32-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-98"><a href="#cb32-98" aria-hidden="true" tabindex="-1"></a>df_rdincome_prop_change_tracts <span class="sc">%&gt;%</span></span>
<span id="cb32-99"><a href="#cb32-99" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> change)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb32-100"><a href="#cb32-100" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-19-1.png" width="960" /></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_rdincome_prop_change_tracts <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">change =</span> <span class="fu">pminmax</span>(change, <span class="sc">-</span><span class="fl">0.2</span>, <span class="fl">0.2</span>)),</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> change),</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">option =</span> <span class="st">&quot;turbo&quot;</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;&lt;= -0.2&quot;</span>, <span class="sc">-</span><span class="fl">0.1</span>, <span class="dv">0</span>, <span class="fl">0.1</span>, <span class="st">&quot;0.2 &lt;=&quot;</span>)</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable) <span class="sc">+</span> </span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Change in proportion of households&quot;</span>,</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Change in proportion of households in income band by tract&quot;</span>,</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using 5-year estimates from the 2006-2010 ACS and 2015-2019 ACS)&quot;</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-19-2.png" width="960" /></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/income_changes_tract_income_prop.pdf&quot;</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_rdincome_prop_change_tracts <span class="sc">%&gt;%</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">change =</span> <span class="fu">pminmax</span>(change, <span class="sc">-</span><span class="fl">0.2</span>, <span class="fl">0.2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(variable <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Less than $50,000&quot;</span>, <span class="st">&quot;$200,000 or more&quot;</span>)),</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> change),</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">option =</span> <span class="st">&quot;turbo&quot;</span>, </span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;&lt;= -0.2&quot;</span>, <span class="sc">-</span><span class="fl">0.1</span>, <span class="dv">0</span>, <span class="fl">0.1</span>, <span class="st">&quot;0.2 &lt;=&quot;</span>)</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable) <span class="sc">+</span> </span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Change in proportion of households&quot;</span>,</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Change in proportion of households in income band by tract&quot;</span>,</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using 5-year estimates from the 2006-2010 ACS and 2015-2019 ACS)&quot;</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>p2</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-19-3.png" width="960" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/income_changes_tract_income_prop_highlow.pdf&quot;</span>)</span></code></pre></div>
<p>Let’s zoom inside the perimeter to see what is happening here a bit more carefully.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">84.53</span>, <span class="sc">-</span><span class="fl">84.2</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">33.6</span>, <span class="fl">33.95</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-20-1.png" width="960" /></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/income_changes_tract_income_prop_itp.pdf&quot;</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>p2 <span class="sc">+</span> <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">84.53</span>, <span class="sc">-</span><span class="fl">84.2</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">33.6</span>, <span class="fl">33.95</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>) </span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-20-2.png" width="960" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/income_changes_tract_income_prop_highlow_itp.pdf&quot;</span>)</span></code></pre></div>
<p>Let’s also just look at the actual numbers of households, rather than the change in proportions over time. (This should let us see if the effects we are seeing are due to chance, or are of evidence of an actual pattern).</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df_rdincome_total_change_tracts <span class="ot">&lt;-</span> df_income_tracts <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, variable, estimate, moe) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">fct_collapse</span>(variable, </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Less than $50,000&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Less than $10,000&quot;</span>, <span class="st">&quot;$10,000 to $14,999&quot;</span>, </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$15,000 to $19,999&quot;</span>, <span class="st">&quot;$20,000 to $24,999&quot;</span>,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$25,000 to $29,999&quot;</span>, <span class="st">&quot;$30,000 to $34,999&quot;</span>,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$35,000 to $39,999&quot;</span>, <span class="st">&quot;$40,000 to $44,999&quot;</span>,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$45,000 to $49,999&quot;</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$50,000 to $74,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$50,000 to $59,999&quot;</span>, <span class="st">&quot;$60,000 to $74,999&quot;</span>),</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$75,000 to $99,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$75,000 to $99,999&quot;</span>),</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$100,000 to $149,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$100,000 to $124,999&quot;</span>, <span class="st">&quot;$125,000 to $149,999&quot;</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$150,000 to $199,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$150,000 to $199,999&quot;</span>),</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$200,000 or more&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$200,000 or more&quot;</span>)</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> income_var_labels)</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, GEOID, variable) <span class="sc">%&gt;%</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">estimate =</span> <span class="fu">sum</span>(estimate),</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">moe =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(moe<span class="sc">**</span><span class="dv">2</span>))</span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">&quot;estimate&quot;</span>, <span class="st">&quot;moe&quot;</span>)</span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">change =</span> estimate_2019 <span class="sc">-</span> estimate_2010,</span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">ratio =</span> estimate_2019 <span class="sc">/</span> estimate_2010,</span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">log_ratio_moe =</span> <span class="fu">sqrt</span>((moe_2019<span class="sc">/</span>estimate_2019)<span class="sc">**</span><span class="dv">2</span> <span class="sc">+</span> (moe_2010<span class="sc">/</span>estimate_2010)<span class="sc">**</span><span class="dv">2</span>)</span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(df_tracts)</span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a>p1_total <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_rdincome_total_change_tracts <span class="sc">%&gt;%</span></span>
<span id="cb39-43"><a href="#cb39-43" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">change =</span> <span class="fu">pminmax</span>(change, <span class="sc">-</span><span class="dv">500</span>, <span class="dv">500</span>)),</span>
<span id="cb39-44"><a href="#cb39-44" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> change),</span>
<span id="cb39-45"><a href="#cb39-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb39-46"><a href="#cb39-46" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb39-47"><a href="#cb39-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">option =</span> <span class="st">&quot;turbo&quot;</span>,</span>
<span id="cb39-48"><a href="#cb39-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;&lt;= -500&quot;</span>, <span class="sc">-</span><span class="dv">250</span>, <span class="dv">0</span>, <span class="dv">250</span>, <span class="st">&quot;500 &lt;=&quot;</span>)</span>
<span id="cb39-49"><a href="#cb39-49" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb39-50"><a href="#cb39-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable) <span class="sc">+</span> </span>
<span id="cb39-51"><a href="#cb39-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb39-52"><a href="#cb39-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb39-53"><a href="#cb39-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb39-54"><a href="#cb39-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb39-55"><a href="#cb39-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Change in number of households&quot;</span>,</span>
<span id="cb39-56"><a href="#cb39-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Change in number of households in income band by tract&quot;</span>,</span>
<span id="cb39-57"><a href="#cb39-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using 5-year estimates from the 2006-2010 ACS and 2015-2019 ACS)&quot;</span></span>
<span id="cb39-58"><a href="#cb39-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb39-59"><a href="#cb39-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb39-60"><a href="#cb39-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-61"><a href="#cb39-61" aria-hidden="true" tabindex="-1"></a>p1_total</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-21-1.png" width="960" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/income_changes_tract_income_net_change.pdf&quot;</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>p2_total <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_rdincome_total_change_tracts <span class="sc">%&gt;%</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">change =</span> <span class="fu">pminmax</span>(change, <span class="sc">-</span><span class="dv">500</span>, <span class="dv">500</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(variable <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Less than $50,000&quot;</span>, <span class="st">&quot;$200,000 or more&quot;</span>)),</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> change),</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">option =</span> <span class="st">&quot;turbo&quot;</span>,</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;&lt;= -500&quot;</span>, <span class="sc">-</span><span class="dv">250</span>, <span class="dv">0</span>, <span class="dv">250</span>, <span class="st">&quot;500 &lt;=&quot;</span>)</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> variable) <span class="sc">+</span> </span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Change in number of households&quot;</span>,</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Change in number of households in income band by tract&quot;</span>,</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using 5-year estimates from the 2006-2010 ACS and 2015-2019 ACS)&quot;</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>p2_total</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-21-2.png" width="960" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/income_changes_tract_income_net_change_highlow.pdf&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>p1_total <span class="sc">+</span> <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">84.53</span>, <span class="sc">-</span><span class="fl">84.2</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">33.6</span>, <span class="fl">33.95</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-22-1.png" width="960" /></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/income_changes_tract_income_net_change_itp.pdf&quot;</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>p2_total <span class="sc">+</span> <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">84.53</span>, <span class="sc">-</span><span class="fl">84.2</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">33.6</span>, <span class="fl">33.95</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>) </span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-22-2.png" width="960" /></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/income_changes_tract_income_net_change_highlow_itp.pdf&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="migration-patterns---income-of-people-moving-inside-census-tracts" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Migration patterns - income of people moving inside census tracts</h1>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>income_variables <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;B07010_0&quot;</span>, <span class="fu">str_pad</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">66</span>, <span class="dv">2</span>, <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>))</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>income_variables_df <span class="ot">&lt;-</span> v11 <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">%in%</span> income_variables) <span class="sc">%&gt;%</span> </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(name, label) <span class="sc">%&gt;%</span> </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">separate</span>(</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>        label, </span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="st">&#39;estimate&#39;</span>, <span class="st">&#39;total&#39;</span>, <span class="st">&#39;moved&#39;</span>, <span class="st">&#39;income&#39;</span>, <span class="st">&#39;band&#39;</span>), </span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">&quot;!!&quot;</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(name, moved, band) <span class="sc">%&gt;%</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(moved <span class="sc">!=</span> <span class="st">&quot;Moved from abroad&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">in_out_state =</span> <span class="fu">fct_collapse</span>(</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as_factor</span>(moved),</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Same house 1 year ago&quot;</span> <span class="ot">=</span> <span class="st">&quot;Same house 1 year ago&quot;</span>,</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Moved in-state&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;Moved within same county&quot;</span>,</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;Moved from different county within same state&quot;</span>,</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;Moved from different state&quot;</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Moved from out-of-state&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Moved from different state&quot;</span>)</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">band =</span> <span class="fu">fct_collapse</span>(</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as_factor</span>(band),</span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$1 to $14,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$1 to $9,999 or loss&quot;</span>, <span class="st">&quot;$10,000 to $14,999&quot;</span></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$15,000 to $34,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$15,000 to $24,999&quot;</span>, <span class="st">&quot;$25,000 to $34,999&quot;</span></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$35,000 to $49,999&quot;</span> <span class="ot">=</span> <span class="st">&quot;$35,000 to $49,999&quot;</span>,</span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$50,000 to $74,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;$50,000 to $64,999&quot;</span>, <span class="st">&quot;$65,000 to $74,999&quot;</span></span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$75,000 or more&quot;</span> <span class="ot">=</span> <span class="st">&quot;$75,000 or more&quot;</span></span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a>df_income_in <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a>    years_acs1,</span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;county&quot;</span>,</span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> income_variables,</span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME)) <span class="sc">%&gt;%</span></span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span></span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(county, <span class="at">.after =</span> GEOID)</span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a>df_income_in <span class="sc">%&gt;%</span></span>
<span id="cb45-58"><a href="#cb45-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(income_variables_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;variable&quot;</span> <span class="ot">=</span> <span class="st">&quot;name&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-59"><a href="#cb45-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.Date</span>(<span class="fu">paste</span>(year, <span class="dv">1</span>, <span class="dv">1</span>, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb45-60"><a href="#cb45-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-61"><a href="#cb45-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, in_out_state, band) <span class="sc">%&gt;%</span> </span>
<span id="cb45-62"><a href="#cb45-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb45-63"><a href="#cb45-63" aria-hidden="true" tabindex="-1"></a>        <span class="at">estimate =</span> <span class="fu">sum</span>(estimate),</span>
<span id="cb45-64"><a href="#cb45-64" aria-hidden="true" tabindex="-1"></a>        <span class="at">moe =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(moe<span class="sc">**</span><span class="dv">2</span>))</span>
<span id="cb45-65"><a href="#cb45-65" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb45-66"><a href="#cb45-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">str_detect</span>(in_out_state, <span class="st">&quot;Moved&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-67"><a href="#cb45-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb45-68"><a href="#cb45-68" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> year, <span class="at">y =</span> estimate, <span class="at">ymin =</span> estimate <span class="sc">-</span> moe,</span>
<span id="cb45-69"><a href="#cb45-69" aria-hidden="true" tabindex="-1"></a>        <span class="at">ymax =</span> estimate <span class="sc">+</span> moe, <span class="at">col =</span> band, <span class="at">fill =</span> band)</span>
<span id="cb45-70"><a href="#cb45-70" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb45-71"><a href="#cb45-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb45-72"><a href="#cb45-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_ribbon</span>(<span class="at">alpha =</span> <span class="fl">0.15</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb45-73"><a href="#cb45-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-74"><a href="#cb45-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>( <span class="sc">~</span> in_out_state, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-75"><a href="#cb45-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">&quot;%Y&quot;</span>, <span class="at">date_breaks =</span> <span class="st">&quot;1 year&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-76"><a href="#cb45-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb45-77"><a href="#cb45-77" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of Individuals&quot;</span>,</span>
<span id="cb45-78"><a href="#cb45-78" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">&quot;Individual Income&quot;</span>,</span>
<span id="cb45-79"><a href="#cb45-79" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Distribution of income of individuals who moved into Atlanta from out of state&quot;</span>,</span>
<span id="cb45-80"><a href="#cb45-80" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;Data from 1-year ACS from 2009 to 2019&quot;</span></span>
<span id="cb45-81"><a href="#cb45-81" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb45-82"><a href="#cb45-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-23-1.png" width="960" /></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/income_out_of_state.pdf&quot;</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>df_income_in_5yr <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    years_acs5,</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;county&quot;</span>,</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> income_variables,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME)) <span class="sc">%&gt;%</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(county, <span class="at">.after =</span> GEOID)</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>df_income_in_5yr <span class="sc">%&gt;%</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(income_variables_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;variable&quot;</span> <span class="ot">=</span> <span class="st">&quot;name&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.Date</span>(<span class="fu">paste</span>(year, <span class="dv">1</span>, <span class="dv">1</span>, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, in_out_state, band) <span class="sc">%&gt;%</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">estimate =</span> <span class="fu">sum</span>(estimate),</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">moe =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(moe<span class="sc">**</span><span class="dv">2</span>))</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(in_out_state <span class="sc">==</span> <span class="st">&quot;Moved from out-of-state&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> year, <span class="at">y =</span> estimate, <span class="at">ymin =</span> estimate <span class="sc">-</span> moe,</span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">ymax =</span> estimate <span class="sc">+</span> moe, <span class="at">col =</span> band, <span class="at">fill =</span> band)</span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_ribbon</span>(<span class="at">alpha =</span> <span class="fl">0.15</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span> </span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">&quot;%Y&quot;</span>, <span class="at">date_breaks =</span> <span class="st">&quot;1 year&quot;</span>) <span class="sc">+</span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of Individuals&quot;</span>, </span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">&quot;Individual Income&quot;</span>,</span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Distribution of income of individuals who moved into Atlanta from out of state&quot;</span>,</span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;Data from 5-year ACS from 2005-2009 to 2016-2020 (years not directly comparable)&quot;</span></span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-23-2.png" width="960" /></p>
<!-- ## Are individuals being forced out?

Before doing anything with the data, we note that there is nothing casual we
can say here. However, we can describe associations between 
different income groups;
here, we investigate whether there is a general association between the change
in those earning less than $75,000 a year, and those earning $150,000 or more in an area. -->
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># df_income_change_corr &lt;- df_income_tracts %&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     filter(variable != &quot;Total&quot;) %&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     select(year, GEOID, variable, estimate, moe) %&gt;%</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co">#     mutate(variable = fct_collapse(variable, </span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co">#         &quot;Less than $75,000&quot; = c(</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co">#             &quot;Less than $10,000&quot;, &quot;$10,000 to $14,999&quot;, </span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co">#             &quot;$15,000 to $19,999&quot;, &quot;$20,000 to $24,999&quot;,</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="co">#             &quot;$25,000 to $29,999&quot;, &quot;$30,000 to $34,999&quot;,</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="co">#             &quot;$35,000 to $39,999&quot;, &quot;$40,000 to $44,999&quot;,</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="co">#             &quot;$45,000 to $49,999&quot;, &quot;$50,000 to $59,999&quot;, </span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="co">#             &quot;$60,000 to $74,999&quot;</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="co">#         ),</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a><span class="co">#         &quot;$75,000 to $99,999&quot; = c(&quot;$75,000 to $99,999&quot;),</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co">#         &quot;$100,000 to $149,999&quot; = c(</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a><span class="co">#             &quot;$100,000 to $124,999&quot;, &quot;$125,000 to $149,999&quot;</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="co">#         ),</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a><span class="co">#         &quot;$150,000 or more&quot; = c(</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a><span class="co">#             &quot;$150,000 to $199,999&quot;, &quot;$200,000 or more&quot;</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a><span class="co">#             )</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a><span class="co">#     )) %&gt;%</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="co">#     mutate(</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a><span class="co">#         variable = factor(</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a><span class="co">#             variable, ordered = TRUE, </span></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a><span class="co">#             levels = c(</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a><span class="co">#                 &quot;Less than $75,000&quot;, &quot;$75,000 to $99,999&quot;,</span></span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a><span class="co">#                 &quot;$100,000 to $149,999&quot;, &quot;$150,000 or more&quot;</span></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a><span class="co">#             )</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a><span class="co">#         )</span></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a><span class="co">#     ) %&gt;%</span></span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a><span class="co">#     group_by(year, GEOID, variable) %&gt;%</span></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a><span class="co">#     summarize(</span></span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a><span class="co">#         estimate = sum(estimate),</span></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a><span class="co">#         moe = sqrt(sum(moe**2))</span></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a><span class="co">#     ) %&gt;%</span></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a><span class="co">#     ungroup() %&gt;%</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a><span class="co">#     pivot_wider(</span></span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a><span class="co">#         names_from = &quot;year&quot;,</span></span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a><span class="co">#         values_from = c(&quot;estimate&quot;, &quot;moe&quot;)</span></span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a><span class="co">#     ) %&gt;%</span></span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a><span class="co">#     mutate(</span></span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a><span class="co">#         change = estimate_2019 - estimate_2010,</span></span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a><span class="co">#         ratio = estimate_2019 / estimate_2010,</span></span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a><span class="co">#         log_ratio_moe = sqrt((moe_2019/estimate_2019)**2 + (moe_2010/estimate_2010)**2)</span></span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a><span class="co">#     ) %&gt;%</span></span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a><span class="co">#     left_join(df_tracts) %&gt;% </span></span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a><span class="co">#     select(GEOID, variable, ratio, log_ratio_moe) %&gt;%</span></span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a><span class="co">#     filter(variable %in% c(&quot;Less than $75,000&quot;, &quot;$150,000 or more&quot;)) %&gt;%</span></span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a><span class="co">#     mutate(variable = fct_recode(</span></span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a><span class="co">#         variable, &quot;lt_75k&quot; = &quot;Less than $75,000&quot;, &quot;gt_150k&quot; = &quot;$150,000 or more&quot;</span></span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a><span class="co">#     )) %&gt;%</span></span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a><span class="co">#     pivot_wider(</span></span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a><span class="co">#         names_from = variable,</span></span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a><span class="co">#         values_from = c(&quot;ratio&quot;, &quot;log_ratio_moe&quot;)</span></span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a><span class="co">#     )</span></span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a><span class="co"># require(deming)</span></span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a><span class="co"># dr &lt;- deming(</span></span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a><span class="co">#     log(ratio_lt_75k) ~ log(ratio_gt_150k), </span></span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a><span class="co">#     data = df_income_change_corr %&gt;% filter(</span></span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a><span class="co">#         ratio_gt_150k &lt; 20, ratio_gt_150k &gt; 0.01</span></span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a><span class="co">#     ),</span></span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a><span class="co">#     ystd = log_ratio_moe_lt_75k, xstd = log_ratio_moe_gt_150k</span></span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb47-65"><a href="#cb47-65" aria-hidden="true" tabindex="-1"></a><span class="co"># dr</span></span></code></pre></div>
<div id="change-in-number-of-households-earning-less-than-75000-in-atlanta-and-the-surrounding-area" class="section level2" number="3.1">
<h2 number="3.1"><span class="header-section-number">3.1</span> Change in number of households earning less than $75,000 in Atlanta and the surrounding area</h2>
<p>In order to try and examine more carefully where people in the lower income band are moving, we look at the change in households over the entire Atlanta Metropoliton Statistical Area in the $75,000 or less income bracket. We note that this roughly corresponds to the <a href="https://livingwage.mit.edu/metros/12060">current living wage</a>) estimate for a household in Atlanta, assuming a two adult household with two children and one adult working.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>df_tracts_msa <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2010</span>),</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>,</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> <span class="st">&quot;B19001_001&quot;</span>,</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> atlanta_msa,</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">TRUE</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(GEOID, geometry) <span class="sc">%&gt;%</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">tp =</span> <span class="fu">st_intersects</span>(</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">st_transform</span>(<span class="fu">st_boundary</span>(itp), <span class="at">crs =</span> <span class="dv">4269</span>),</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>            geometry, <span class="at">sparse =</span> <span class="cn">FALSE</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>        )[<span class="dv">1</span>, ],</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">itp =</span> <span class="fu">st_within</span>(</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>            geometry,</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>            <span class="fu">st_transform</span>(itp, <span class="at">crs =</span> <span class="dv">4269</span>), <span class="at">sparse =</span> <span class="cn">FALSE</span></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>        )[, <span class="dv">1</span>],</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">itp =</span> tp <span class="sc">|</span> itp,</span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">otp =</span> <span class="sc">!</span>itp</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>tp) <span class="sc">%&gt;%</span></span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">cols =</span> <span class="fu">c</span>(itp, otp),</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_to =</span> <span class="st">&quot;class&quot;</span>,</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_to =</span> <span class="st">&quot;in_class&quot;</span></span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(in_class <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>in_class)</span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>df_income_tracts_msa <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2010</span>, <span class="dv">2019</span>),</span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>,</span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> income_var_list,</span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> atlanta_msa,</span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">tract =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME),</span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?), (.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">2&quot;</span>, NAME)</span>
<span id="cb48-49"><a href="#cb48-49" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb48-50"><a href="#cb48-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span></span>
<span id="cb48-51"><a href="#cb48-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(tract, county, <span class="at">.after =</span> GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb48-52"><a href="#cb48-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-53"><a href="#cb48-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, variable, estimate) <span class="sc">%&gt;%</span></span>
<span id="cb48-54"><a href="#cb48-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">fct_collapse</span>(variable, </span>
<span id="cb48-55"><a href="#cb48-55" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Less than $50,000&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb48-56"><a href="#cb48-56" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Less than $10,000&quot;</span>, <span class="st">&quot;$10,000 to $14,999&quot;</span>, </span>
<span id="cb48-57"><a href="#cb48-57" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$15,000 to $19,999&quot;</span>, <span class="st">&quot;$20,000 to $24,999&quot;</span>,</span>
<span id="cb48-58"><a href="#cb48-58" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$25,000 to $29,999&quot;</span>, <span class="st">&quot;$30,000 to $34,999&quot;</span>,</span>
<span id="cb48-59"><a href="#cb48-59" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$35,000 to $39,999&quot;</span>, <span class="st">&quot;$40,000 to $44,999&quot;</span>,</span>
<span id="cb48-60"><a href="#cb48-60" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$45,000 to $49,999&quot;</span></span>
<span id="cb48-61"><a href="#cb48-61" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb48-62"><a href="#cb48-62" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$50,000 to $74,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$50,000 to $59,999&quot;</span>, <span class="st">&quot;$60,000 to $74,999&quot;</span>),</span>
<span id="cb48-63"><a href="#cb48-63" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$75,000 to $99,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$75,000 to $99,999&quot;</span>),</span>
<span id="cb48-64"><a href="#cb48-64" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$100,000 to $149,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb48-65"><a href="#cb48-65" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;$100,000 to $124,999&quot;</span>, <span class="st">&quot;$125,000 to $149,999&quot;</span></span>
<span id="cb48-66"><a href="#cb48-66" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb48-67"><a href="#cb48-67" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$150,000 to $199,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$150,000 to $199,999&quot;</span>),</span>
<span id="cb48-68"><a href="#cb48-68" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$200,000 or more&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;$200,000 or more&quot;</span>)</span>
<span id="cb48-69"><a href="#cb48-69" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb48-70"><a href="#cb48-70" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb48-71"><a href="#cb48-71" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, <span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> income_var_labels)</span>
<span id="cb48-72"><a href="#cb48-72" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb48-73"><a href="#cb48-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, GEOID, variable) <span class="sc">%&gt;%</span></span>
<span id="cb48-74"><a href="#cb48-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">estimate =</span> <span class="fu">sum</span>(estimate)) <span class="sc">%&gt;%</span></span>
<span id="cb48-75"><a href="#cb48-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb48-76"><a href="#cb48-76" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb48-77"><a href="#cb48-77" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;estimate_&quot;</span>,</span>
<span id="cb48-78"><a href="#cb48-78" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> <span class="st">&quot;estimate&quot;</span></span>
<span id="cb48-79"><a href="#cb48-79" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb48-80"><a href="#cb48-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">change =</span> estimate_2019 <span class="sc">-</span> estimate_2010) <span class="sc">%&gt;%</span></span>
<span id="cb48-81"><a href="#cb48-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(df_tracts_msa)</span>
<span id="cb48-82"><a href="#cb48-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-83"><a href="#cb48-83" aria-hidden="true" tabindex="-1"></a>p_wider <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb48-84"><a href="#cb48-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb48-85"><a href="#cb48-85" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_income_tracts_msa <span class="sc">%&gt;%</span></span>
<span id="cb48-86"><a href="#cb48-86" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(variable <span class="sc">==</span> <span class="st">&quot;Less than $50,000&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-87"><a href="#cb48-87" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">change =</span> <span class="fu">pminmax</span>(change, <span class="sc">-</span><span class="dv">500</span>, <span class="dv">500</span>)),</span>
<span id="cb48-88"><a href="#cb48-88" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> change),</span>
<span id="cb48-89"><a href="#cb48-89" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb48-90"><a href="#cb48-90" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb48-91"><a href="#cb48-91" aria-hidden="true" tabindex="-1"></a>        <span class="at">option =</span> <span class="st">&quot;turbo&quot;</span>,</span>
<span id="cb48-92"><a href="#cb48-92" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;&lt;= -500&quot;</span>, <span class="sc">-</span><span class="dv">250</span>, <span class="dv">0</span>, <span class="dv">250</span>, <span class="st">&quot;500 &lt;=&quot;</span>)</span>
<span id="cb48-93"><a href="#cb48-93" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data =</span> atlanta_msa_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb48-94"><a href="#cb48-94" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc_msa, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb48-95"><a href="#cb48-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-96"><a href="#cb48-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb48-97"><a href="#cb48-97" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Change in number of households earning less than $50,000&quot;</span>,</span>
<span id="cb48-98"><a href="#cb48-98" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Change in number of households in income band by tract&quot;</span>,</span>
<span id="cb48-99"><a href="#cb48-99" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using 5-year estimates from the 2006-2010 ACS and 2015-2019 ACS)&quot;</span></span>
<span id="cb48-100"><a href="#cb48-100" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb48-101"><a href="#cb48-101" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb48-102"><a href="#cb48-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-103"><a href="#cb48-103" aria-hidden="true" tabindex="-1"></a>p_wider</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-25-1.png" width="960" /></p>
</div>
</div>
<div id="how-has-the-amount-of-rent-changed-in-the-atlanta-area-from-2010-to-2020" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> How has the amount of rent changed in the Atlanta area from 2010 to 2020?</h1>
<p>From the data and graph below, we can see that prior to the recession, the majority of the amount paid per month in rent was less than $1,249 a month, whereas now a considerable number of units require at least this much to pay. That said, this is not accounting directly for changes in inflation; however, when looking at the median and lower quartile monthly rent, these are typically around 20% and 10% higher than what they were ten years ago, even when adjusting for inflation. The same occurs in most of the counties for the upper quartile of monthly rent.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>v20 <span class="ot">&lt;-</span> <span class="fu">load_variables</span>(<span class="dv">2020</span>, <span class="st">&quot;acs5&quot;</span>, <span class="at">cache =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>rent_variables_2010 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;B25063_0&quot;</span>, <span class="fu">str_pad</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>, <span class="dv">2</span>, <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>))</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>rent_var_labels_2010 <span class="ot">&lt;-</span> v11 <span class="sc">%&gt;%</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">%in%</span> rent_variables_2010) <span class="sc">%&gt;%</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(label) <span class="sc">%&gt;%</span> <span class="fu">as_vector</span>()</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>rent_var_labels_2010 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_split</span>(rent_var_labels_2010, <span class="st">&quot;!!&quot;</span>), tail, <span class="dv">1</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>rent_var_list_2010 <span class="ot">&lt;-</span> <span class="fu">setNames</span>(</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.list</span>(rent_variables_2010), rent_var_labels_2010</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>df_rent_distribution_2010 <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2010</span>),</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;county&quot;</span>,</span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> rent_var_list_2010,</span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME)</span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(county, <span class="at">.after =</span> GEOID)</span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a>rent_variables_2020 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;B25063_0&quot;</span>, <span class="fu">str_pad</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">27</span>, <span class="dv">2</span>, <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>))</span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a>rent_var_labels_2020 <span class="ot">&lt;-</span> v20 <span class="sc">%&gt;%</span></span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">%in%</span> rent_variables_2020) <span class="sc">%&gt;%</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(label) <span class="sc">%&gt;%</span> <span class="fu">as_vector</span>()</span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a>rent_var_labels_2020 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(</span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_split</span>(rent_var_labels_2020, <span class="st">&quot;!!&quot;</span>), tail, <span class="dv">1</span></span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a>rent_var_list_2020 <span class="ot">&lt;-</span> <span class="fu">setNames</span>(</span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.list</span>(rent_variables_2020), rent_var_labels_2020</span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true" tabindex="-1"></a>df_rent_distribution_2020 <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb49-48"><a href="#cb49-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2020</span>),</span>
<span id="cb49-49"><a href="#cb49-49" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb49-50"><a href="#cb49-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;county&quot;</span>,</span>
<span id="cb49-51"><a href="#cb49-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb49-52"><a href="#cb49-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> rent_var_list_2020,</span>
<span id="cb49-53"><a href="#cb49-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb49-54"><a href="#cb49-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb49-55"><a href="#cb49-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb49-56"><a href="#cb49-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb49-57"><a href="#cb49-57" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-58"><a href="#cb49-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb49-59"><a href="#cb49-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb49-60"><a href="#cb49-60" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME)</span>
<span id="cb49-61"><a href="#cb49-61" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(county, <span class="at">.after =</span> GEOID)</span>
<span id="cb49-62"><a href="#cb49-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-63"><a href="#cb49-63" aria-hidden="true" tabindex="-1"></a>df_rent_distribution <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb49-64"><a href="#cb49-64" aria-hidden="true" tabindex="-1"></a>    df_rent_distribution_2010, df_rent_distribution_2020</span>
<span id="cb49-65"><a href="#cb49-65" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-66"><a href="#cb49-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-67"><a href="#cb49-67" aria-hidden="true" tabindex="-1"></a>collapsed_factors <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb49-68"><a href="#cb49-68" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Less than $750&quot;</span>, <span class="st">&quot;$750 to $999&quot;</span>, <span class="st">&quot;$1,000 to $1,249&quot;</span>,</span>
<span id="cb49-69"><a href="#cb49-69" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;$1,250 to $1,499&quot;</span>, <span class="st">&quot;$1,500 to $1,999&quot;</span>, <span class="st">&quot;$2,000 or more&quot;</span></span>
<span id="cb49-70"><a href="#cb49-70" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-71"><a href="#cb49-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-72"><a href="#cb49-72" aria-hidden="true" tabindex="-1"></a>df_rent_dist_summary <span class="ot">&lt;-</span> df_rent_distribution <span class="sc">%&gt;%</span> </span>
<span id="cb49-73"><a href="#cb49-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">fct_collapse</span>(</span>
<span id="cb49-74"><a href="#cb49-74" aria-hidden="true" tabindex="-1"></a>    variable,</span>
<span id="cb49-75"><a href="#cb49-75" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Less than $750&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb49-76"><a href="#cb49-76" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Less than $100&quot;</span>, <span class="st">&quot;$100 to $149&quot;</span>, <span class="st">&quot;$150 to $199&quot;</span>, <span class="st">&quot;$200 to $249&quot;</span>,</span>
<span id="cb49-77"><a href="#cb49-77" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$250 to $299&quot;</span>, <span class="st">&quot;$300 to $349&quot;</span>, <span class="st">&quot;$350 to $399&quot;</span>,</span>
<span id="cb49-78"><a href="#cb49-78" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$400 to $449&quot;</span>, <span class="st">&quot;$450 to $499&quot;</span>, <span class="st">&quot;$500 to $549&quot;</span>,</span>
<span id="cb49-79"><a href="#cb49-79" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$550 to $599&quot;</span>, <span class="st">&quot;$600 to $649&quot;</span>, <span class="st">&quot;$650 to $699&quot;</span>,</span>
<span id="cb49-80"><a href="#cb49-80" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$700 to $749&quot;</span></span>
<span id="cb49-81"><a href="#cb49-81" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-82"><a href="#cb49-82" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;$750 to $999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb49-83"><a href="#cb49-83" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$750 to $799&quot;</span>, <span class="st">&quot;$800 to $899&quot;</span>, <span class="st">&quot;$900 to $999&quot;</span></span>
<span id="cb49-84"><a href="#cb49-84" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-85"><a href="#cb49-85" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;$1,000 to $1,249&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb49-86"><a href="#cb49-86" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$1,000 to $1,249&quot;</span></span>
<span id="cb49-87"><a href="#cb49-87" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-88"><a href="#cb49-88" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;$1,250 to $1,499&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb49-89"><a href="#cb49-89" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$1,250 to $1,499&quot;</span></span>
<span id="cb49-90"><a href="#cb49-90" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-91"><a href="#cb49-91" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;$1,500 to $1,999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb49-92"><a href="#cb49-92" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$1,500 to $1,999&quot;</span></span>
<span id="cb49-93"><a href="#cb49-93" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-94"><a href="#cb49-94" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;$2,000 or more&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb49-95"><a href="#cb49-95" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$2,000 or more&quot;</span>, <span class="st">&quot;$2,000 to $2,499&quot;</span>,</span>
<span id="cb49-96"><a href="#cb49-96" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$2,500 to $2,999&quot;</span>, <span class="st">&quot;$3,000 to $3,499&quot;</span>,</span>
<span id="cb49-97"><a href="#cb49-97" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;$3,500 or more&quot;</span></span>
<span id="cb49-98"><a href="#cb49-98" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-99"><a href="#cb49-99" aria-hidden="true" tabindex="-1"></a>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(year, variable) <span class="sc">%&gt;%</span></span>
<span id="cb49-100"><a href="#cb49-100" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb49-101"><a href="#cb49-101" aria-hidden="true" tabindex="-1"></a>        <span class="at">estimate =</span> <span class="fu">sum</span>(estimate), <span class="at">moe =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(moe<span class="sc">**</span><span class="dv">2</span>))</span>
<span id="cb49-102"><a href="#cb49-102" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb49-103"><a href="#cb49-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">%in%</span> collapsed_factors) <span class="sc">%&gt;%</span></span>
<span id="cb49-104"><a href="#cb49-104" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb49-105"><a href="#cb49-105" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable =</span> <span class="fu">factor</span>(variable, </span>
<span id="cb49-106"><a href="#cb49-106" aria-hidden="true" tabindex="-1"></a>            <span class="at">ordered =</span> <span class="st">&quot;true&quot;</span>, <span class="at">levels =</span> collapsed_factors)</span>
<span id="cb49-107"><a href="#cb49-107" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb49-108"><a href="#cb49-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-109"><a href="#cb49-109" aria-hidden="true" tabindex="-1"></a>df_rent_dist_summary</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["year"],"name":[1],"type":["chr"],"align":["left"]},{"label":["variable"],"name":[2],"type":["ord"],"align":["right"]},{"label":["estimate"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["moe"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2010","2":"$1,000 to $1,249","3":"111573","4":"2535.9543"},{"1":"2010","2":"$1,250 to $1,499","3":"48747","4":"1699.0524"},{"1":"2010","2":"$1,500 to $1,999","3":"32133","4":"1382.1874"},{"1":"2010","2":"Less than $750","3":"121441","4":"2827.5256"},{"1":"2010","2":"$2,000 or more","3":"8614","4":"699.4991"},{"1":"2010","2":"$750 to $999","3":"178740","4":"3329.2750"},{"1":"2020","2":"$1,000 to $1,249","3":"165178","4":"3694.5207"},{"1":"2020","2":"$1,250 to $1,499","3":"139655","4":"3582.4307"},{"1":"2020","2":"$1,500 to $1,999","3":"131892","4":"3618.4222"},{"1":"2020","2":"Less than $750","3":"59629","4":"2500.2204"},{"1":"2020","2":"$2,000 or more","3":"45352","4":"2100.1895"},{"1":"2020","2":"$750 to $999","3":"106894","4":"3187.2990"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>df_rent_dist_summary <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> variable, <span class="at">y =</span> estimate, <span class="at">fill =</span> year)) <span class="sc">+</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">ymin =</span> estimate <span class="sc">-</span> moe, <span class="at">ymax =</span> estimate <span class="sc">+</span> moe),</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cbPalette) <span class="sc">+</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">label =</span> year, <span class="at">y =</span> <span class="dv">10000</span>), </span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="dv">1</span>),</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">5</span>, <span class="at">hjust =</span> <span class="st">&#39;left&#39;</span>,</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">&quot;black&quot;</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Gross Rent&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of renter-occupied housing units&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Distribution of monthly gross rent in the Atlanta area from 2010 to 2019&quot;</span>,</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;Data from the 5-year ACS from 2006-2010 to 2016-2020&quot;</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-26-1.png" width="960" /></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>df_rent_lower_quartile <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2010</span>, <span class="dv">2020</span>),</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;county&quot;</span>,</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> <span class="st">&quot;B25057_001&quot;</span>,</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME)</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(county, <span class="at">.after =</span> GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(county, year, estimate) <span class="sc">%&gt;%</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year, <span class="at">values_from =</span> estimate,</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;rent_&quot;</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">rent_2010_in_2020_dollars =</span> rent_2010 <span class="sc">*</span> <span class="fl">1.19</span>,</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">ratio_adjusting_for_inflation =</span> rent_2020 <span class="sc">/</span> (rent_2010 <span class="sc">*</span> <span class="fl">1.19</span>)</span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>df_rent_lower_quartile</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["county"],"name":[1],"type":["chr"],"align":["left"]},{"label":["rent_2010"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["rent_2020"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["rent_2010_in_2020_dollars"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["ratio_adjusting_for_inflation"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cherokee County","2":"624","3":"852","4":"742.56","5":"1.147382"},{"1":"Clayton County","2":"578","3":"704","4":"687.82","5":"1.023524"},{"1":"Cobb County","2":"647","3":"882","4":"769.93","5":"1.145559"},{"1":"DeKalb County","2":"619","3":"820","4":"736.61","5":"1.113208"},{"1":"Douglas County","2":"603","3":"750","4":"717.57","5":"1.045194"},{"1":"Fayette County","2":"708","3":"930","4":"842.52","5":"1.103831"},{"1":"Forsyth County","2":"676","3":"839","4":"804.44","5":"1.042962"},{"1":"Fulton County","2":"578","3":"785","4":"687.82","5":"1.141287"},{"1":"Gwinnett County","2":"659","3":"926","4":"784.21","5":"1.180806"},{"1":"Henry County","2":"668","3":"852","4":"794.92","5":"1.071806"},{"1":"Rockdale County","2":"593","3":"761","4":"705.67","5":"1.078408"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>df_rent_median_quartile <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2010</span>, <span class="dv">2020</span>),</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;county&quot;</span>,</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> <span class="st">&quot;B25058_001&quot;</span>,</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME)</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(county, <span class="at">.after =</span> GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(county, year, estimate) <span class="sc">%&gt;%</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year, <span class="at">values_from =</span> estimate,</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;rent_&quot;</span></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">rent_2010_in_2020_dollars =</span> rent_2010 <span class="sc">*</span> <span class="fl">1.19</span>,</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">ratio_adjusting_for_inflation =</span> rent_2020 <span class="sc">/</span> (rent_2010 <span class="sc">*</span> <span class="fl">1.19</span>)</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>df_rent_median_quartile</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["county"],"name":[1],"type":["chr"],"align":["left"]},{"label":["rent_2010"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["rent_2020"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["rent_2010_in_2020_dollars"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["ratio_adjusting_for_inflation"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cherokee County","2":"778","3":"1110","4":"925.82","5":"1.1989372"},{"1":"Clayton County","2":"692","3":"824","4":"823.48","5":"1.0006315"},{"1":"Cobb County","2":"771","3":"1094","4":"917.49","5":"1.1923836"},{"1":"DeKalb County","2":"763","3":"1027","4":"907.97","5":"1.1310946"},{"1":"Douglas County","2":"727","3":"934","4":"865.13","5":"1.0796065"},{"1":"Fayette County","2":"870","3":"1219","4":"1035.30","5":"1.1774365"},{"1":"Forsyth County","2":"867","3":"1280","4":"1031.73","5":"1.2406347"},{"1":"Fulton County","2":"773","3":"1098","4":"919.87","5":"1.1936469"},{"1":"Gwinnett County","2":"790","3":"1133","4":"940.10","5":"1.2051909"},{"1":"Henry County","2":"809","3":"990","4":"962.71","5":"1.0283471"},{"1":"Rockdale County","2":"746","3":"881","4":"887.74","5":"0.9924077"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>df_rent_upper_quartile <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2010</span>, <span class="dv">2020</span>),</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;county&quot;</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> <span class="st">&quot;B25059_001&quot;</span>,</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME)</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span> </span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(county, <span class="at">.after =</span> GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(county, year, estimate) <span class="sc">%&gt;%</span></span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year, <span class="at">values_from =</span> estimate,</span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;rent_&quot;</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">rent_2010_in_2020_dollars =</span> rent_2010 <span class="sc">*</span> <span class="fl">1.19</span>,</span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">ratio_adjusting_for_inflation =</span> rent_2020 <span class="sc">/</span> (rent_2010 <span class="sc">*</span> <span class="fl">1.19</span>)</span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a>df_rent_upper_quartile</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["county"],"name":[1],"type":["chr"],"align":["left"]},{"label":["rent_2010"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["rent_2020"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["rent_2010_in_2020_dollars"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["ratio_adjusting_for_inflation"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cherokee County","2":"967","3":"1389","4":"1150.73","5":"1.2070599"},{"1":"Clayton County","2":"831","3":"960","4":"988.89","5":"0.9707854"},{"1":"Cobb County","2":"928","3":"1367","4":"1104.32","5":"1.2378658"},{"1":"DeKalb County","2":"943","3":"1315","4":"1122.17","5":"1.1718367"},{"1":"Douglas County","2":"885","3":"1140","4":"1053.15","5":"1.0824669"},{"1":"Fayette County","2":"1134","3":"1544","4":"1349.46","5":"1.1441614"},{"1":"Forsyth County","2":"1133","3":"1702","4":"1348.27","5":"1.2623584"},{"1":"Fulton County","2":"974","3":"1458","4":"1159.06","5":"1.2579159"},{"1":"Gwinnett County","2":"965","3":"1378","4":"1148.35","5":"1.1999826"},{"1":"Henry County","2":"966","3":"1193","4":"1149.54","5":"1.0378064"},{"1":"Rockdale County","2":"878","3":"1092","4":"1044.82","5":"1.0451561"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div id="examining-quintiles-of-earnings" class="section level2" number="4.1">
<h2 number="4.1"><span class="header-section-number">4.1</span> Examining quintiles of earnings</h2>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>df_income_quintiles <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2010</span>, <span class="dv">2019</span>),</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">first_qui =</span> <span class="st">&quot;B19080_001&quot;</span>,</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">second_qui =</span> <span class="st">&quot;B19080_002&quot;</span>,</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">third_qui =</span> <span class="st">&quot;B19080_003&quot;</span>,</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">fourth_qui =</span> <span class="st">&quot;B19080_004&quot;</span>,</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">top_5per =</span> <span class="st">&quot;B19080_005&quot;</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">tract =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME),</span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?), (.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">2&quot;</span>, NAME)</span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(tract, county, <span class="at">.after =</span> GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, variable, estimate, moe) <span class="sc">%&gt;%</span></span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">inflation_factor =</span> <span class="fu">ifelse</span>(year <span class="sc">==</span> <span class="st">&quot;2019&quot;</span>, <span class="dv">1</span>, <span class="fl">1.175</span>),</span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">estimate =</span> estimate <span class="sc">*</span> inflation_factor,</span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">moe =</span> moe <span class="sc">*</span> inflation_factor</span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>inflation_factor)</span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a>df_income_quintiles_change <span class="ot">&lt;-</span> df_income_quintiles <span class="sc">%&gt;%</span></span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(variable <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;first_qui&quot;</span>, <span class="st">&quot;top_5per&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year,</span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> <span class="fu">c</span>(estimate, moe)</span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">estimate_diff =</span> estimate_2019 <span class="sc">-</span> estimate_2010,</span>
<span id="cb54-40"><a href="#cb54-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">moe_diff =</span> <span class="fu">sqrt</span>(moe_2019<span class="sc">**</span><span class="dv">2</span> <span class="sc">+</span> moe_2010<span class="sc">**</span><span class="dv">2</span>)</span>
<span id="cb54-41"><a href="#cb54-41" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-42"><a href="#cb54-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(GEOID, variable, estimate_diff, moe_diff) <span class="sc">%&gt;%</span></span>
<span id="cb54-43"><a href="#cb54-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb54-44"><a href="#cb54-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> variable,</span>
<span id="cb54-45"><a href="#cb54-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> <span class="fu">c</span>(estimate_diff, moe_diff)</span>
<span id="cb54-46"><a href="#cb54-46" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-47"><a href="#cb54-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-48"><a href="#cb54-48" aria-hidden="true" tabindex="-1"></a>df_income_quintiles_change <span class="sc">%&gt;%</span></span>
<span id="cb54-49"><a href="#cb54-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate_diff_top_5per)) <span class="sc">+</span></span>
<span id="cb54-50"><a href="#cb54-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb54-51"><a href="#cb54-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb54-52"><a href="#cb54-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Adjusted difference in 95% percentile of income between 2010 and 2019&quot;</span>,</span>
<span id="cb54-53"><a href="#cb54-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;Spike occurs due to max income being capped at a particular level&quot;</span></span>
<span id="cb54-54"><a href="#cb54-54" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-27-1.png" width="960" /></p>
</div>
<div id="examining-measures-of-income-inequality" class="section level2" number="4.2">
<h2 number="4.2"><span class="header-section-number">4.2</span> Examining measures of income inequality</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Gini_coefficient">Gini coefficient</a> is a measure of income inequality frequently used, giving a number between 0 and 1 (with larger values corresponding to greater inequality). We examine the change in the estimate Gini coefficient in each census tract, comparing the periods between 2006-2010 and 2015-2019, and when doing so, we find that there has been a statistically significant increase in the Gini coefficient generally across tracts, with the Gini coefficient increasing on average by 0.014 across tracts.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>df_gini <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lst</span>(<span class="dv">2010</span>, <span class="dv">2019</span>),</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">get_acs</span>(</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>,</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">state =</span> <span class="st">&quot;GA&quot;</span>,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">gini =</span> <span class="st">&quot;B19083_001&quot;</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> .x,</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> arc_counties,</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">FALSE</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">tract =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, NAME),</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">county =</span> <span class="fu">gsub</span>(<span class="st">&quot;^(.*?), (.*?),.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">2&quot;</span>, NAME)</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>NAME) <span class="sc">%&gt;%</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(tract, county, <span class="at">.after =</span> GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, GEOID, estimate, moe)</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>df_gini_wide <span class="ot">&lt;-</span> df_gini <span class="sc">%&gt;%</span></span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> <span class="fu">c</span>(estimate, moe),</span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year,</span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;gini_&quot;</span>,</span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">diff =</span> estimate_gini_2019 <span class="sc">-</span> estimate_gini_2010,</span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">diff_moe =</span> <span class="fu">sqrt</span>(moe_gini_2019<span class="sc">**</span><span class="dv">2</span> <span class="sc">+</span> moe_gini_2010<span class="sc">**</span><span class="dv">2</span>),</span>
<span id="cb55-32"><a href="#cb55-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">diff_sd =</span> diff_moe <span class="sc">/</span> <span class="fl">1.645</span>,</span>
<span id="cb55-33"><a href="#cb55-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">z_score =</span> diff <span class="sc">/</span> diff_sd, </span>
<span id="cb55-34"><a href="#cb55-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">ratio =</span> estimate_gini_2019 <span class="sc">/</span> estimate_gini_2010,</span>
<span id="cb55-35"><a href="#cb55-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">log_ratio_moe =</span> <span class="fu">sqrt</span>( (moe_gini_2010 <span class="sc">/</span> estimate_gini_2010)<span class="sc">**</span><span class="dv">2</span> <span class="sc">+</span> (moe_gini_2019 <span class="sc">/</span> estimate_gini_2019)<span class="sc">**</span><span class="dv">2</span>  ),</span>
<span id="cb55-36"><a href="#cb55-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">log_ratio_sd =</span> log_ratio_moe <span class="sc">/</span> <span class="fl">1.645</span></span>
<span id="cb55-37"><a href="#cb55-37" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-38"><a href="#cb55-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-39"><a href="#cb55-39" aria-hidden="true" tabindex="-1"></a>mean_est <span class="ot">&lt;-</span> <span class="fu">mean</span>(df_gini_wide<span class="sc">$</span>diff, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-40"><a href="#cb55-40" aria-hidden="true" tabindex="-1"></a>sd1 <span class="ot">&lt;-</span> <span class="fu">sd</span>(df_gini_wide<span class="sc">$</span>diff, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-41"><a href="#cb55-41" aria-hidden="true" tabindex="-1"></a>sd2 <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>(df_gini_wide<span class="sc">$</span>diff_sd<span class="sc">**</span><span class="dv">2</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb55-42"><a href="#cb55-42" aria-hidden="true" tabindex="-1"></a>samp_n <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(df_gini_wide<span class="sc">$</span>diff))</span>
<span id="cb55-43"><a href="#cb55-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-44"><a href="#cb55-44" aria-hidden="true" tabindex="-1"></a>t_stat <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(samp_n)<span class="sc">*</span>mean_est<span class="sc">/</span><span class="fu">sqrt</span>(sd1<span class="sc">**</span><span class="dv">2</span> <span class="sc">+</span> sd2<span class="sc">**</span><span class="dv">2</span>)</span>
<span id="cb55-45"><a href="#cb55-45" aria-hidden="true" tabindex="-1"></a>p_val <span class="ot">&lt;-</span> <span class="fu">pt</span>(t_stat, <span class="at">df =</span> samp_n, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span>
<span id="cb55-46"><a href="#cb55-46" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;p-value of hypothesis test:&quot;</span>, p_val))</span></code></pre></div>
<pre><code>## [1] &quot;p-value of hypothesis test: 0.000000173458002202825&quot;</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> df_tracts <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(df_gini_wide),</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> estimate_gini_2019),</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">option =</span> <span class="st">&quot;magma&quot;</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Gini coefficient&quot;</span>,</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Gini coefficient estimates over 2015-2019 across Atlanta&quot;</span>,</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using ACS 2015-2019 estimates)&quot;</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-28-1.png" width="960" /></p>
</div>
</div>
<div id="incorporating-land-use-change-data" class="section level1" number="5">
<h1 number="5"><span class="header-section-number">5</span> Incorporating land-use change data</h1>
<div id="change-from-2008-to-2019" class="section level2" number="5.1">
<h2 number="5.1"><span class="header-section-number">5.1</span> Change from 2008 to 2019</h2>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>land_use_labels <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data-files/ncld_class_labels.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(layer_vals, labels) <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="at">layer_vals =</span> <span class="dv">0</span>, <span class="at">labels =</span> <span class="st">&quot;Roads&quot;</span>)</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>land_use_labels <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code></pre></div>
<pre><code>## # A tibble: 21 × 2
##    layer_vals labels                      
##         &lt;dbl&gt; &lt;chr&gt;                       
##  1         11 Open water                  
##  2         12 Perennial ice/snow          
##  3         21 Developed, open space       
##  4         22 Developed, low intensity    
##  5         23 Developed, medium intensity 
##  6         24 Developed high intensity    
##  7         31 Barren land (rock/sand/clay)
##  8         41 Deciduous forest            
##  9         42 Evergreen forest            
## 10         43 Mixed forest                
## 11         51 Dwarf scrub                 
## 12         52 Shrub/scrub                 
## 13         71 Grassland/herbaceous        
## 14         72 Sedge/herbaceous            
## 15         73 Lichens                     
## 16         74 Moss                        
## 17         81 Pasture/hay                 
## 18         82 Cultivated crops            
## 19         90 Woody wetlands              
## 20         95 Emergent herbaceous wetlands
## 21          0 Roads</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>land_use_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data-files/ncld_histogram_data.csv&quot;</span>)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>land_use_df <span class="ot">&lt;-</span> land_use_df <span class="sc">%&gt;%</span> </span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">complete</span>(GEOID, year, class) <span class="sc">%&gt;%</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">replace_na</span>(value, <span class="dv">0</span>))</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>land_use_change <span class="ot">&lt;-</span> land_use_df <span class="sc">%&gt;%</span> </span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2008</span>, <span class="dv">2019</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID, year) <span class="sc">%&gt;%</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">value =</span> value <span class="sc">/</span> <span class="fu">sum</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year,</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> value,</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;value_&quot;</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">abs_diff =</span> <span class="fu">abs</span>(value_2019 <span class="sc">-</span> value_2008)) <span class="sc">%&gt;%</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">tv_dist =</span> <span class="fl">0.5</span><span class="sc">*</span><span class="fu">sum</span>(abs_diff))</span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>land_use_change <span class="sc">%&gt;%</span></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> tv_dist)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Total variation change in land use proportions of tract&quot;</span>,</span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Number of census tracts&quot;</span>,</span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;Examining 2008 vs 2019&quot;</span></span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-29-1.png" width="960" /></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>land_use_change_shp <span class="ot">&lt;-</span> land_use_change <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">GEOID =</span> <span class="fu">as.character</span>(GEOID)) <span class="sc">%&gt;%</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(df_tracts)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>land_use_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> land_use_change_shp <span class="sc">%&gt;%</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">tv_dist =</span> <span class="fu">pminmax</span>(tv_dist, <span class="dv">0</span>, <span class="fl">0.05</span>)),</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> tv_dist),</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>,</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;0&quot;</span>, <span class="st">&quot;0.01&quot;</span>, <span class="st">&quot;0.02&quot;</span>, <span class="st">&quot;0.03&quot;</span>, <span class="st">&quot;0.04&quot;</span>, <span class="st">&quot;0.05+&quot;</span>)</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Overall change in land type&quot;</span>,</span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Total variation between type of land use between 2008 and 2019&quot;</span>,</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using NCLD National Land Cover Database)&quot;</span></span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>land_use_plot</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-29-2.png" width="960" /></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/land_use_change.pdf&quot;</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>land_use_plot_outliers <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> land_use_change_shp,</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> tv_dist),</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">option =</span> <span class="st">&quot;viridis&quot;</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Overall change in land type</span><span class="sc">\n</span><span class="st">(Not truncated)&quot;</span>,</span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Total variation between type of land use between 2008 and 2019&quot;</span>,</span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using NCLD National Land Cover Database)&quot;</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>land_use_plot_outliers</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-29-3.png" width="960" /></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>land_use_plot <span class="sc">+</span> </span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">84.53</span>, <span class="sc">-</span><span class="fl">84.2</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">33.6</span>, <span class="fl">33.95</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-29-4.png" width="960" /></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/land_use_change_itp.pdf&quot;</span>)</span></code></pre></div>
</div>
<div id="change-from-2001-to-2019" class="section level2" number="5.2">
<h2 number="5.2"><span class="header-section-number">5.2</span> Change from 2001 to 2019</h2>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>land_use_change_2001 <span class="ot">&lt;-</span> land_use_df <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2001</span>, <span class="dv">2019</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID, year) <span class="sc">%&gt;%</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">value =</span> value <span class="sc">/</span> <span class="fu">sum</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year,</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> value,</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;value_&quot;</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">abs_diff =</span> <span class="fu">abs</span>(value_2019 <span class="sc">-</span> value_2001)) <span class="sc">%&gt;%</span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">tv_dist =</span> <span class="fl">0.5</span> <span class="sc">*</span> <span class="fu">sum</span>(abs_diff))</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>land_use_change_2001 <span class="sc">%&gt;%</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> tv_dist)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Total variation change in land use proportions of tract&quot;</span>,</span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Number of census tracts&quot;</span>,</span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;Examining 2001 vs 2019&quot;</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-30-1.png" width="960" /></p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>land_use_change_shp_2001 <span class="ot">&lt;-</span> land_use_change_2001 <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">GEOID =</span> <span class="fu">as.character</span>(GEOID)) <span class="sc">%&gt;%</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(df_tracts)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>land_use_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> land_use_change_shp_2001 <span class="sc">%&gt;%</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">tv_dist =</span> <span class="fu">pminmax</span>(tv_dist, <span class="dv">0</span>, <span class="fl">0.15</span>)),</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> tv_dist),</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>,</span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;0&quot;</span>, <span class="st">&quot;0.05&quot;</span>, <span class="st">&quot;0.10&quot;</span>, <span class="st">&quot;0.15+&quot;</span>)</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Overall change in land type&quot;</span>,</span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Total variation between type of land use between 2001 and 2019&quot;</span>,</span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using NCLD National Land Cover Database)&quot;</span></span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-25"><a href="#cb66-25" aria-hidden="true" tabindex="-1"></a>land_use_plot</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-30-2.png" width="960" /></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/land_use_change_2001.pdf&quot;</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>land_use_plot_outliers <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> land_use_change_shp_2001,</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> <span class="fu">pminmax</span>(tv_dist, <span class="dv">0</span>, <span class="fl">0.3</span>)),</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>(</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">option =</span> <span class="st">&quot;viridis&quot;</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Overall change in land type</span><span class="sc">\n</span><span class="st">(Truncated at 0.3)&quot;</span>,</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Total variation between type of land use between 2001 and 2019&quot;</span>,</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using NCLD National Land Cover Database)&quot;</span></span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>land_use_plot_outliers</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-30-3.png" width="960" /></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>land_use_plot <span class="sc">+</span> </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">84.53</span>, <span class="sc">-</span><span class="fl">84.2</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">33.6</span>, <span class="fl">33.95</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-30-4.png" width="960" /></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/land_use_change_itp_2001.pdf&quot;</span>)</span></code></pre></div>
</div>
<div id="looking-at-reduced-classes-merging-together-the-non-developed-types-into-one-category" class="section level2" number="5.3">
<h2 number="5.3"><span class="header-section-number">5.3</span> Looking at reduced classes (merging together the non-developed types into one category)</h2>
<p>As we can see, looking at the most frequent “class” (i.e, the way in which the land has been used the most) tends to not change much across the two time periods, although there has been a growth in the more developed areas.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>land_use_df_summary <span class="ot">&lt;-</span> land_use_df <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">fct_collapse</span>(</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">factor</span>(class), <span class="st">&quot;Roads&quot;</span> <span class="ot">=</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Developed, open space&quot;</span> <span class="ot">=</span> <span class="st">&quot;21&quot;</span>,</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Developed, low intensity&quot;</span> <span class="ot">=</span> <span class="st">&quot;22&quot;</span>,</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Developed, medium intensity&quot;</span> <span class="ot">=</span> <span class="st">&quot;23&quot;</span>,</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Developed, high intensity&quot;</span> <span class="ot">=</span> <span class="st">&quot;24&quot;</span>,</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Undeveloped / greenland&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;11&quot;</span>, <span class="st">&quot;12&quot;</span>, <span class="st">&quot;31&quot;</span>, <span class="st">&quot;41&quot;</span>, <span class="st">&quot;42&quot;</span>, </span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;43&quot;</span>, <span class="st">&quot;51&quot;</span>, <span class="st">&quot;52&quot;</span>, <span class="st">&quot;71&quot;</span>, <span class="st">&quot;72&quot;</span>, <span class="st">&quot;73&quot;</span>, <span class="st">&quot;74&quot;</span>,</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;81&quot;</span>, <span class="st">&quot;82&quot;</span>, <span class="st">&quot;90&quot;</span>, <span class="st">&quot;95&quot;</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID, year, class) <span class="sc">%&gt;%</span></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">value =</span> <span class="fu">sum</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2008</span>, <span class="dv">2019</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID, year) <span class="sc">%&gt;%</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">value =</span> value <span class="sc">/</span> <span class="fu">sum</span>(value))</span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>land_use_df_summary <span class="sc">%&gt;%</span></span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year,</span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> value,</span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;value_&quot;</span></span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">value_diff =</span> value_2019 <span class="sc">-</span> value_2008) <span class="sc">%&gt;%</span></span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb70-28"><a href="#cb70-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">tv_diff =</span> <span class="fl">0.5</span><span class="sc">*</span><span class="fu">sum</span>(<span class="fu">abs</span>(value_diff))) <span class="sc">%&gt;%</span></span>
<span id="cb70-29"><a href="#cb70-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> tv_diff)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb70-30"><a href="#cb70-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb70-31"><a href="#cb70-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;Total variation difference between proportion of land use by tract from 2008 to 2019&quot;</span>,</span>
<span id="cb70-32"><a href="#cb70-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Change in land-use (using reduced classes)&quot;</span></span>
<span id="cb70-33"><a href="#cb70-33" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-31-1.png" width="960" /></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>land_use_df_summary <span class="sc">%&gt;%</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID, year) <span class="sc">%&gt;%</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">max_value =</span> <span class="fu">max</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(value <span class="sc">==</span> max_value) <span class="sc">%&gt;%</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year, class) <span class="sc">%&gt;%</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, class) <span class="sc">%&gt;%</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> count,</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["class"],"name":[1],"type":["fct"],"align":["left"]},{"label":["2008"],"name":[2],"type":["int"],"align":["right"]},{"label":["2019"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"Undeveloped / greenland","2":"448","3":"434"},{"1":"Developed, open space","2":"204","3":"204"},{"1":"Developed, low intensity","2":"47","3":"51"},{"1":"Developed, medium intensity","2":"31","3":"39"},{"1":"Developed, high intensity","2":"53","3":"55"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We can also see that both inside and outside of the perimeter, there is generally a trend towards more developed areas.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>land_use_df <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">fct_collapse</span>(</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">factor</span>(class), <span class="st">&quot;Roads&quot;</span> <span class="ot">=</span> <span class="st">&quot;0&quot;</span>,</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Developed, open space&quot;</span> <span class="ot">=</span> <span class="st">&quot;21&quot;</span>,</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Developed, low intensity&quot;</span> <span class="ot">=</span> <span class="st">&quot;22&quot;</span>,</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Developed, medium intensity&quot;</span> <span class="ot">=</span> <span class="st">&quot;23&quot;</span>,</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Developed, high intensity&quot;</span> <span class="ot">=</span> <span class="st">&quot;24&quot;</span>,</span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Undeveloped / greenland&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;11&quot;</span>, <span class="st">&quot;12&quot;</span>, <span class="st">&quot;31&quot;</span>, <span class="st">&quot;41&quot;</span>, <span class="st">&quot;42&quot;</span>, </span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;43&quot;</span>, <span class="st">&quot;51&quot;</span>, <span class="st">&quot;52&quot;</span>, <span class="st">&quot;71&quot;</span>, <span class="st">&quot;72&quot;</span>, <span class="st">&quot;73&quot;</span>, <span class="st">&quot;74&quot;</span>,</span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;81&quot;</span>, <span class="st">&quot;82&quot;</span>, <span class="st">&quot;90&quot;</span>, <span class="st">&quot;95&quot;</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span> </span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">GEOID =</span> <span class="fu">as.character</span>(GEOID)) <span class="sc">%&gt;%</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(</span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a>        df_tracts <span class="sc">%&gt;%</span> </span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(GEOID, class) <span class="sc">%&gt;%</span></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rename</span>(<span class="at">peri_class =</span> class) <span class="sc">%&gt;%</span></span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">st_drop_geometry</span>()</span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year, class, peri_class) <span class="sc">%&gt;%</span></span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">value =</span> <span class="fu">sum</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb72-25"><a href="#cb72-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> value,</span>
<span id="cb72-26"><a href="#cb72-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> peri_class</span>
<span id="cb72-27"><a href="#cb72-27" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb72-28"><a href="#cb72-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb72-29"><a href="#cb72-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">itp =</span> itp <span class="sc">/</span> <span class="fu">sum</span>(itp), <span class="at">otp =</span> otp <span class="sc">/</span> <span class="fu">sum</span>(otp)) <span class="sc">%&gt;%</span></span>
<span id="cb72-30"><a href="#cb72-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2008</span>, <span class="dv">2019</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb72-31"><a href="#cb72-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb72-32"><a href="#cb72-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year,</span>
<span id="cb72-33"><a href="#cb72-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> <span class="fu">c</span>(itp, otp)</span>
<span id="cb72-34"><a href="#cb72-34" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(class <span class="sc">!=</span> <span class="st">&quot;Roads&quot;</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["class"],"name":[1],"type":["fct"],"align":["left"]},{"label":["itp_2008"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["itp_2019"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["otp_2008"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["otp_2019"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Undeveloped / greenland","2":"0.3138459","3":"0.3010759","4":"0.67589928","5":"0.65538605"},{"1":"Developed, open space","2":"0.2761157","3":"0.2659103","4":"0.14884255","5":"0.15187791"},{"1":"Developed, low intensity","2":"0.1719057","3":"0.1712607","4":"0.10231791","5":"0.10646426"},{"1":"Developed, medium intensity","2":"0.1227707","3":"0.1375952","4":"0.04613511","5":"0.05513861"},{"1":"Developed, high intensity","2":"0.1153620","3":"0.1241579","4":"0.02678371","5":"0.03111155"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="clustering-similar-types-of-land-together-examining-changes" class="section level2" number="5.4">
<h2 number="5.4"><span class="header-section-number">5.4</span> Clustering similar types of land together, examining changes</h2>
<p>To interpret the types of land better, we fit a K-mediods clustering algorithm to the vector of proportions of land use, after having reduced the number of classes slightly - for example, we our purposes we do not need three different types of forest class. To decide on the number of clusters, we used a gap statistic to decide on an appriopate number of clusters, which gave the choice of 8 clusters. The clusters were labelled according to the mediods of the clusters; we then plot the cluster assignments by tract across 2001 and 2019. Overall, 287 of the 783 areas considering changed in their type of use.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>land_use_cluster <span class="ot">&lt;-</span> land_use_df <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2001</span>, <span class="dv">2019</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(class <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">fct_collapse</span>(<span class="fu">factor</span>(class),</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;1X&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;11&quot;</span>, <span class="st">&quot;12&quot;</span>),</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;21&quot;</span> <span class="ot">=</span> <span class="st">&quot;21&quot;</span>,</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;22&quot;</span> <span class="ot">=</span> <span class="st">&quot;22&quot;</span>,</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;23&quot;</span> <span class="ot">=</span> <span class="st">&quot;23&quot;</span>,</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;24&quot;</span> <span class="ot">=</span> <span class="st">&quot;24&quot;</span>,</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;31&quot;</span> <span class="ot">=</span> <span class="st">&quot;31&quot;</span>,</span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;4X&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;41&quot;</span>, <span class="st">&quot;42&quot;</span>, <span class="st">&quot;43&quot;</span>),</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;5X&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;51&quot;</span>, <span class="st">&quot;52&quot;</span>),</span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;7X&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;71&quot;</span>, <span class="st">&quot;72&quot;</span>, <span class="st">&quot;73&quot;</span>, <span class="st">&quot;74&quot;</span>),</span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;8X&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;81&quot;</span>, <span class="st">&quot;82&quot;</span>),</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;9X&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;90&quot;</span>, <span class="st">&quot;95&quot;</span>)</span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID, year, class) <span class="sc">%&gt;%</span></span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">value =</span> <span class="fu">sum</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(GEOID, year) <span class="sc">%&gt;%</span></span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">value =</span> value <span class="sc">/</span> <span class="fu">sum</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()  <span class="sc">%&gt;%</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> class,</span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> value,</span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;class_&quot;</span></span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>cg <span class="ot">&lt;-</span> <span class="fu">clusGap</span>(</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    land_use_cluster[, <span class="dv">3</span><span class="sc">:</span><span class="dv">13</span>], clara, <span class="at">samples =</span> <span class="dv">100</span>,</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">K.max =</span> <span class="dv">15</span>, <span class="at">B =</span> <span class="dv">100</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cg)</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>land_clusters <span class="ot">&lt;-</span> <span class="fu">clara</span>(</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>    land_use_cluster[, <span class="dv">3</span><span class="sc">:</span><span class="dv">13</span>], <span class="dv">8</span>, <span class="at">metric =</span> <span class="st">&quot;manhattan&quot;</span>,</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">samples =</span> <span class="dv">100</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(land_clusters)</span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_tibble</span>(land_clusters<span class="sc">$</span>medoids), </span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;data-files/cluster_mediods.csv&quot;</span></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_tibble</span>(land_clusters<span class="sc">$</span>clustering), </span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;data-files/cluster-assignments.csv&quot;</span></span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>cluster_mediods <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;data-files/cluster_mediods.csv&quot;</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>cluster_assignments <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;data-files/cluster-assignments.csv&quot;</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>cluster_mediods</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["class_1X"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["class_21"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["class_22"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["class_23"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["class_24"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["class_31"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["class_4X"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["class_5X"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["class_7X"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["class_8X"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["class_9X"],"name":[11],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.0110257939","2":"0.1016105","3":"0.07471625","4":"0.01171028","5":"0.003699208","6":"0.0007182928","7":"0.5835903","8":"0.004489330","9":"0.014537823","10":"0.160560404","11":"0.033341742"},{"1":"0.0068759651","2":"0.2358995","3":"0.15636913","4":"0.04003295","5":"0.017619300","6":"0.0012247633","7":"0.4534213","8":"0.004286671","9":"0.006123816","10":"0.070455588","11":"0.007691033"},{"1":"0.0142617373","2":"0.3216436","3":"0.23120470","4":"0.07912522","5":"0.027289286","6":"0.0006856604","7":"0.3045343","8":"0.001508453","9":"0.008502190","10":"0.007268001","11":"0.003976831"},{"1":"0.0004195797","2":"0.1709868","3":"0.15592110","4":"0.14389516","5":"0.107342735","6":"0.0027979290","7":"0.3448389","8":"0.015568508","9":"0.014172468","10":"0.015059162","11":"0.028997616"},{"1":"0.0019352717","2":"0.4343601","3":"0.21351064","4":"0.07611141","5":"0.008601208","6":"0.0012901811","7":"0.2420068","8":"0.000000000","9":"0.008816238","10":"0.010321449","11":"0.003046683"},{"1":"0.0000000000","2":"0.4031791","3":"0.28763674","4":"0.11864127","5":"0.059367095","6":"0.0000000000","7":"0.1261701","8":"0.000000000","9":"0.001001142","10":"0.004004570","11":"0.000000000"},{"1":"0.0006516023","2":"0.2345819","3":"0.20039198","4":"0.19895335","5":"0.141382368","6":"0.0005340584","7":"0.2006935","8":"0.000000000","9":"0.009127543","10":"0.013683648","11":"0.000000000"},{"1":"0.0000000000","2":"0.1066476","3":"0.21736563","4":"0.31975111","5":"0.356235713","6":"0.0000000000","7":"0.0000000","8":"0.000000000","9":"0.000000000","10":"0.000000000","11":"0.000000000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>land_use_labels <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code></pre></div>
<pre><code>## # A tibble: 21 × 2
##    layer_vals labels                      
##         &lt;dbl&gt; &lt;chr&gt;                       
##  1         11 Open water                  
##  2         12 Perennial ice/snow          
##  3         21 Developed, open space       
##  4         22 Developed, low intensity    
##  5         23 Developed, medium intensity 
##  6         24 Developed high intensity    
##  7         31 Barren land (rock/sand/clay)
##  8         41 Deciduous forest            
##  9         42 Evergreen forest            
## 10         43 Mixed forest                
## 11         51 Dwarf scrub                 
## 12         52 Shrub/scrub                 
## 13         71 Grassland/herbaceous        
## 14         72 Sedge/herbaceous            
## 15         73 Lichens                     
## 16         74 Moss                        
## 17         81 Pasture/hay                 
## 18         82 Cultivated crops            
## 19         90 Woody wetlands              
## 20         95 Emergent herbaceous wetlands
## 21          0 Roads</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>land_use_cluster <span class="sc">%&gt;%</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cbind</span>(cluster_assignments) <span class="sc">%&gt;%</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">cluster =</span> value) <span class="sc">%&gt;%</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(GEOID, year, cluster) <span class="sc">%&gt;%</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> year,</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> cluster,</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_prefix =</span> <span class="st">&quot;cluster_&quot;</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">changed_tracts =</span> <span class="fu">sum</span>(cluster_2001 <span class="sc">!=</span> cluster_2019))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["changed_tracts"],"name":[1],"type":["int"],"align":["right"]}],"data":[{"1":"287"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>land_use_cluster_classes <span class="ot">&lt;-</span> land_use_cluster <span class="sc">%&gt;%</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cbind</span>(cluster_assignments) <span class="sc">%&gt;%</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">cluster =</span> value, <span class="at">GEOID =</span> <span class="fu">as.character</span>(GEOID)) <span class="sc">%&gt;%</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>( </span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">cluster =</span> <span class="fu">fct_recode</span>(<span class="fu">factor</span>(cluster),</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Mostly forest / farmland&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>, </span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Mostly forest / some developed open + low intensity space&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span>, </span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Mostly developed open + low intensity / some forest&quot;</span> <span class="ot">=</span> <span class="st">&quot;3&quot;</span>, </span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Mostly developed space (all intensities) / some forest&quot;</span> <span class="ot">=</span> <span class="st">&quot;4&quot;</span>, </span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Mostly developed open + low intensity, little medium/high&quot;</span> <span class="ot">=</span> <span class="st">&quot;5&quot;</span>, </span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Mostly developed open + low intensity, some medium/high&quot;</span> <span class="ot">=</span> <span class="st">&quot;6&quot;</span>, </span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Mostly developed space (all intensities)&quot;</span> <span class="ot">=</span> <span class="st">&quot;7&quot;</span>, </span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Mostly medium to high intensity developed space&quot;</span> <span class="ot">=</span> <span class="st">&quot;8&quot;</span>,</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(GEOID, year, cluster)</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a>pal <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;#4EB265&quot;</span>, <span class="st">&quot;#CAE0AB&quot;</span>,</span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;#F7F056&quot;</span>, <span class="st">&quot;#EE8026&quot;</span>, </span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;#7BAFDE&quot;</span>, <span class="st">&quot;#1965B0&quot;</span>,</span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;#882E72&quot;</span>, <span class="st">&quot;#DC050C&quot;</span></span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb79-23"><a href="#cb79-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-24"><a href="#cb79-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb79-25"><a href="#cb79-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(</span>
<span id="cb79-26"><a href="#cb79-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> land_use_cluster_classes <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(df_tracts),</span>
<span id="cb79-27"><a href="#cb79-27" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">geometry =</span> geometry, <span class="at">fill =</span> cluster),</span>
<span id="cb79-28"><a href="#cb79-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.25</span></span>
<span id="cb79-29"><a href="#cb79-29" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb79-30"><a href="#cb79-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> arc_counties_shp, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb79-31"><a href="#cb79-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> highway_arc, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb79-32"><a href="#cb79-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>( <span class="sc">~</span> year) <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal) <span class="sc">+</span></span>
<span id="cb79-33"><a href="#cb79-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb79-34"><a href="#cb79-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb79-35"><a href="#cb79-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.direction =</span> <span class="st">&quot;vertical&quot;</span></span>
<span id="cb79-36"><a href="#cb79-36" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb79-37"><a href="#cb79-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb79-38"><a href="#cb79-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">&quot;Type of land&quot;</span>,</span>
<span id="cb79-39"><a href="#cb79-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;Classification of type of land use in 2001 and 2019&quot;</span>,</span>
<span id="cb79-40"><a href="#cb79-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&quot;(Data using NCLD National Land Cover Database)&quot;</span></span>
<span id="cb79-41"><a href="#cb79-41" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="acs_files/figure-html/unnamed-chunk-35-1.png" width="960" /></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img-files/land_use_change_2001_2019_clusters.pdf&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="appendix" class="section level1" number="6">
<h1 number="6"><span class="header-section-number">6</span> Appendix</h1>
<div id="data-sources" class="section level2" number="6.1">
<h2 number="6.1"><span class="header-section-number">6.1</span> Data sources</h2>
<ul>
<li><a href="https://www.census.gov/programs-surveys/acs">The American Communities Survey</a>
<ul>
<li>We highlight that the ACS only provides one-year estimates for geographical units with more than 70,000 residents, which means it is suitable for looking at counties, but not census tracts. As a result, we look at ACS 5-year estimates from non-overlapping time periods when looking at census tracts. Moreover, due to changes in the number and shapes of census tracts after different decennial census periods, we restrict our analysis to end points between 2010 and 2019 when examining census tracts. We also highlight that 1-year estimates for the year 2020 <a href="https://www.census.gov/newsroom/press-releases/2021/changes-2020-acs-1-year.html">do not exist</a>, as a result of the coronavirus pandemic.</li>
<li>The ACS typically reports margin of errors, which correspond to 1.645 times the standard error; when performing hypotheis testing we will make this adjustment from the margin of error values.</li>
<li>Adjustments between dollar values are done according to the <a href="https://www.bls.gov/cpi/research-series/r-cpi-u-rs-home.htm">Consumer Price Index</a>; for example, the income adjustment factor between 2010 and 2020 is 1.19, and 1.175 for 2010 and 2019.</li>
</ul></li>
<li><a href="https://www.mrlc.gov/">National Land Cover Database</a></li>
<li><a href="https://landsat.visibleearth.nasa.gov/">Landsat satellite imagery</a></li>
</ul>
</div>
<div id="testing-for-correlations-of-noisy-observations" class="section level2" number="6.2">
<h2 number="6.2"><span class="header-section-number">6.2</span> Testing for correlations of noisy observations</h2>
<p>Suppose we make noisy observations <span class="math inline">\(((X_i, Y_i))_{i =1, \ldots, N}\)</span> of some underlying quantities <span class="math inline">\(( (\mu_{X, i}, \mu_{Y, i}) )_{i = 1, \ldots, N}\)</span> with known measurement standard errors <span class="math inline">\(\sigma_{X, i}\)</span> and <span class="math inline">\(\sigma_{Y, i}\)</span> respectively, and that the observations are made independently of each other. This is an assumption which is usually satisified by ACS data, where we make observations of multiple variables across different census tracts, with the noise arising from sampling uncertainity in not being able to survey all households. Here, <span class="math inline">\(i\)</span> acts as the index for census tracts, and <span class="math inline">\(\mu_{X, i}\)</span> and <span class="math inline">\(\mu_{Y, i}\)</span> represent some underlying variables (e.g median income and the Gini index in a census tract) which we are interested in).</p>
<p>In such a scenario, it is typical to assume that conditional on the <span class="math inline">\(\mu_{X, i}\)</span> and <span class="math inline">\(\mu_{Y, i}\)</span> we have that <span class="math display">\[ \begin{pmatrix} X_i \\ Y_i \end{pmatrix} \sim N\Big( \begin{pmatrix} 
\mu_{X, i} \\ \mu_{Y, i} \end{pmatrix}, \begin{pmatrix} \sigma_{X, i}^2 &amp; 0 
\\ 0 &amp; \sigma_{Y, i}^2 \end{pmatrix} \Big). \]</span> Making the additional assumption that <span class="math display">\[ \begin{pmatrix} \mu_{X, i} \\ \mu_{Y, i} \end{pmatrix} \sim 
N\Big( \begin{pmatrix} \mu_{X} \\ \mu_{Y} \end{pmatrix}, \begin{pmatrix} \tau_X^2 &amp; \rho \tau_X \tau_Y \\ \rho \tau_X \tau_Y &amp; \tau_Y^2 \end{pmatrix} \Big)
\]</span> independently across the units <span class="math inline">\(i\)</span>, then we are interested in making inference about <span class="math inline">\(\rho\)</span>. To do so, we make use of the fact that under the above assumptions, the marginal distribution of the <span class="math inline">\((X_i, Y_i)\)</span> is <span class="math display">\[ \begin{pmatrix} X_i \\ Y_i \end{pmatrix} \sim 
N\Big( \begin{pmatrix} \mu_{X} \\ \mu_{Y} \end{pmatrix}, \begin{pmatrix}
\sigma_{X, i}^2 + \tau_X^2 &amp; \rho \tau_X \tau_Y \\ \rho \tau_X \tau_Y &amp; \sigma_{Y, i}^2 + \tau_Y^2 
\end{pmatrix} \Big).
\]</span> As a result, under the assumption that <span class="math inline">\(N^{-2} \sum_{i=1}^N (\sigma_{X, i}^4 + \sigma_{Y, i}^4) \to 0\)</span> as <span class="math inline">\(N \to \infty\)</span>, a consistent estimator for <span class="math inline">\(\rho\)</span> is given by <span class="math display">\[\frac{ N^{-1} \sum_{i=1}^N (X_i - \bar{X})(Y_i - \bar{Y}) }{ \big( N^{-1} \sum_{i=1}^N [ (X_i - \bar{X})^2 - \sigma_{X, i}^2 ] \big)^{1/2} \big( N^{-1} \sum_{i=1}^N [ (Y_i - \bar{Y})^2 - \sigma_{Y, i}^2 ] \big)^{1/2}        }\]</span> where we write <span class="math inline">\(\bar{X} = N^{-1} \sum_{i=1}^N X_i\)</span> and <span class="math inline">\(\bar{Y} = N^{-1} \sum_{i=1}^N Y_i\)</span>. In order to perform hypothesis testing, a <a href="https://en.wikipedia.org/wiki/Bootstrapping_(statistics)">bootstrap</a> of the observed data <span class="math inline">\((X_i, Y_i, \sigma_{X, i}, \sigma_{Y, i})\)</span> is used to approximate the sampling distribution of <span class="math inline">\(\rho\)</span>. We note that in finite samples, one of the square root terms may be negative; in such a scenario, we return the value of <span class="math inline">\(\rho\)</span> as a <code>NA</code>; if this occurs frequently enough, then we will just consider the data too noisy to make reasonable inference for the presence of a correlation.</p>
</div>
<div id="standard-errors-of-log-ratios-of-quantities" class="section level2" number="6.3">
<h2 number="6.3"><span class="header-section-number">6.3</span> Standard errors of log ratios of quantities</h2>
<p>Suppose we have observations <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> whose expected values are <span class="math inline">\(\mu_X\)</span> and <span class="math inline">\(\mu_Y\)</span>, and whose standard errors are <span class="math inline">\(\sigma_X\)</span> and <span class="math inline">\(\sigma_Y\)</span> respectively, and moreover suppose that <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are independent. In such a scenario, the estimate of <span class="math inline">\(\log(X/Y)\)</span> is approximated by <span class="math inline">\(\log( \mu_X / \mu_Y )\)</span> and the standard error is approximated by <span class="math display">\[ \Big(   \frac{ \sigma_X^2}{ \mu_X^2} + \frac{ \sigma_Y^2}{\mu_Y^2} \Big)^{1/2}.\]</span> Looking at the ratio of quantities is suitable when we are interesting in looking at quantities which may be on different scales naturally, such as e.g the number of households in an census tract in different income bands, where census tracts may vary significantly in the number of households, but we expect the overall ratios between quantities to be similar.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
